// define console.log/warn to avoid errors on IE (or other browsers where it is undefined)
function doSearch(){google.load("search","1",{language:"en",callback:function(){var e=$("#cse"),t={enableOrderBy:!0,orderByOptions:{keys:[{label:"Relevance",key:""},{label:"Date",key:"date"}]},enableImageSearch:!0,imageSearchOptions:{layout:google.search.ImageSearch.LAYOUT_POPUP},googleAnalyticsOptions:{queryParameter:"q",categoryParameter:""}},n=new google.search.CustomSearchControl(e.attr("data-cse-id"),t);n.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET),n.draw("cse"),e.attr("data-search-term")!=""&&n.execute(e.attr("data-search-term"))}},!0)}function showEmailSignupModal(e){wrapper=$('<div class="mailing-list-wrapper overlay-content">Loading...</div>').load("/mailing_list?js=1&email="+e).css("top",$(document).scrollTop()+20),$("body").append(wrapper).append('<div class="overlay-screen"></div>')}function hideOverlays(){$(".overlay-screen, .overlay-content").animate({opacity:0},100,function(){$(this).remove()})}typeof console=="undefined"&&(window.console={log:function(){},warn:function(){}}),function(e,t,n){function r(e,n){var r=t.createElement(e||"div"),i;for(i in n)r[i]=n[i];return r}function i(e){for(var t=1,n=arguments.length;t<n;t++)e.appendChild(arguments[t]);return e}function s(e,t,n,r){var i=["opacity",t,~~(e*100),n,r].join("-"),s=.01+n/r*100,o=Math.max(1-(1-e)/t*(100-s),e),u=h.substring(0,h.indexOf("Animation")).toLowerCase(),a=u&&"-"+u+"-"||"";return c[i]||(p.insertRule("@"+a+"keyframes "+i+"{"+"0%{opacity:"+o+"}"+s+"%{opacity:"+e+"}"+(s+.01)+"%{opacity:1}"+(s+t)%100+"%{opacity:"+e+"}"+"100%{opacity:"+o+"}"+"}",0),c[i]=1),i}function o(e,t){var r=e.style,i,s;if(r[t]!==n)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(s=0;s<l.length;s++){i=l[s]+t;if(r[i]!==n)return i}}function u(e,t){for(var n in t)e.style[o(e,n)||n]=t[n];return e}function a(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)e[i]===n&&(e[i]=r[i])}return e}function f(e){var t={x:e.offsetLeft,y:e.offsetTop};while(e=e.offsetParent)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}var l=["webkit","Moz","ms","O"],c={},h,p=function(){var e=r("style");return i(t.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}(),d={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto"},v=function m(e){if(!this.spin)return new m(e);this.opts=a(e||{},m.defaults,d)};v.defaults={},a(v.prototype,{spin:function(e){this.stop();var t=this,n=t.opts,i=t.el=u(r(0,{className:n.className}),{position:"relative",zIndex:n.zIndex}),s=n.radius+n.length+n.width,o,a;e&&(e.insertBefore(i,e.firstChild||null),a=f(e),o=f(i),u(i,{left:(n.left=="auto"?a.x-o.x+(e.offsetWidth>>1):n.left+s)+"px",top:(n.top=="auto"?a.y-o.y+(e.offsetHeight>>1):n.top+s)+"px"})),i.setAttribute("aria-role","progressbar"),t.lines(i,t.opts);if(!h){var l=0,c=n.fps,p=c/n.speed,d=(1-n.opacity)/(p*n.trail/100),v=p/n.lines;!function m(){l++;for(var e=n.lines;e;e--){var r=Math.max(1-(l+e*v)%p*d,n.opacity);t.opacity(i,n.lines-e,r,n)}t.timeout=t.el&&setTimeout(m,~~(1e3/c))}()}return t},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=n),this},lines:function(e,t){function n(e,n){return u(r(),{position:"absolute",width:t.length+t.width+"px",height:t.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*o+t.rotate)+"deg) translate("+t.radius+"px"+",0)",borderRadius:(t.width>>1)+"px"})}var o=0,a;for(;o<t.lines;o++)a=u(r(),{position:"absolute",top:1+~(t.width/2)+"px",transform:t.hwaccel?"translate3d(0,0,0)":"",opacity:t.opacity,animation:h&&s(t.opacity,t.trail,o,t.lines)+" "+1/t.speed+"s linear infinite"}),t.shadow&&i(a,u(n("#000","0 0 4px #000"),{top:"2px"})),i(e,i(a,n(t.color,"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}}),!function(){function e(e,t){return r("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}var t=u(r("group"),{behavior:"url(#default#VML)"});!o(t,"transform")&&t.adj?(p.addRule(".spin-vml","behavior:url(#default#VML)"),v.prototype.lines=function(t,n){function r(){return u(e("group",{coordsize:a+" "+a,coordorigin:-o+" "+ -o}),{width:a,height:a})}function s(t,s,a){i(l,i(u(r(),{rotation:360/n.lines*t+"deg",left:~~s}),i(u(e("roundrect",{arcsize:1}),{width:o,height:n.width,left:n.radius,top:-n.width>>1,filter:a}),e("fill",{color:n.color,opacity:n.opacity}),e("stroke",{opacity:0}))))}var o=n.length+n.width,a=2*o,f=-(n.width+n.length)*2+"px",l=u(r(),{position:"absolute",top:f,left:f}),c;if(n.shadow)for(c=1;c<=n.lines;c++)s(c,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(c=1;c<=n.lines;c++)s(c);return i(t,l)},v.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=i.childNodes[t+r],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}):h=o(t,"animation")}(),e.Spinner=v}(window,document),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,n,r,i){return jQuery.easing[jQuery.easing.def](e,t,n,r,i)},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t+n:r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t+n:-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,i){return r*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t*t+n:r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,r,i){return t==0?n:r*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n},easeInOutExpo:function(e,t,n,r,i){return t==0?n:t==i?n+r:(t/=i/2)<1?r/2*Math.pow(2,10*(t-1))+n:r/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,r,i){return(t/=i/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+n:r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return-(u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o))+n},easeOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return u*Math.pow(2,-10*t)*Math.sin((t*i-s)*2*Math.PI/o)+r+n},easeInOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i/2)==2)return n+r;o||(o=i*.3*1.5);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return t<1?-0.5*u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)+n:u*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)*.5+r+n},easeInBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*(t/=i)*t*((s+1)*t-s)+n},easeOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*((t=t/i-1)*t*((s+1)*t+s)+1)+n},easeInOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),(t/=i/2)<1?r/2*t*t*(((s*=1.525)+1)*t-s)+n:r/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+n},easeInBounce:function(e,t,n,r,i){return r-jQuery.easing.easeOutBounce(e,i-t,0,r,i)+n},easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*7.5625*t*t+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(e,t,n,r,i){return t<i/2?jQuery.easing.easeInBounce(e,t*2,0,r,i)*.5+n:jQuery.easing.easeOutBounce(e,t*2-i,0,r,i)*.5+r*.5+n}}),function(e){e.isScrollToFixed=function(t){return e(t).data("ScrollToFixed")!==undefined},e.ScrollToFixed=function(t,n){function g(){s.trigger("preUnfixed.ScrollToFixed"),T(),s.trigger("unfixed.ScrollToFixed"),p=-1,l=s.offset().top,c=s.offset().left,r.options.offsets&&(c+=s.offset().left-s.position().left),h==-1&&(h=c),o=s.css("position"),i=!0,r.options.bottom!=-1&&(s.trigger("preFixed.ScrollToFixed"),S(),s.trigger("fixed.ScrollToFixed"))}function y(){var e=r.options.limit;return e?typeof e=="function"?e.apply(s):e:0}function b(){return o==="fixed"}function w(){return o==="absolute"}function E(){return!b()&&!w()}function S(){b()||(d.css({display:s.css("display"),width:s.outerWidth(!0),height:s.outerHeight(!0),"float":s.css("float")}),s.css({width:s.width(),position:"fixed",top:r.options.bottom==-1?C():"",bottom:r.options.bottom==-1?"":r.options.bottom,"margin-left":"0px"}),s.addClass("scroll-to-fixed-fixed"),r.options.className&&s.addClass(r.options.className),o="fixed")}function x(){var e=y(),t=c;r.options.removeOffsets&&(t=0,e-=l),s.css({width:s.width(),position:"absolute",top:e,left:t,"margin-left":"0px",bottom:""}),o="absolute"}function T(){E()||(p=-1,d.css("display","none"),s.css({width:"",position:u,left:"",top:f.top,"margin-left":""}),s.removeClass("scroll-to-fixed-fixed"),r.options.className&&s.removeClass(r.options.className),o=null)}function N(e){e!=p&&(s.css("left",c-e),p=e)}function C(){var e=r.options.marginTop;return e?typeof e=="function"?e.apply(s):e:0}function k(){if(!e.isScrollToFixed(s))return;var t=i;i||g();var n=e(window).scrollLeft(),o=e(window).scrollTop(),f=y();if(r.options.minWidth&&e(window).width()<r.options.minWidth){if(!E()||!t)A(),s.trigger("preUnfixed.ScrollToFixed"),T(),s.trigger("unfixed.ScrollToFixed")}else if(r.options.bottom==-1){if(f>0&&o>=f-C()){if(!w()||!t)A(),s.trigger("preAbsolute.ScrollToFixed"),x(),s.trigger("unfixed.ScrollToFixed")}else if(o>=l-C()){if(!b()||!t)A(),s.trigger("preFixed.ScrollToFixed"),S(),p=-1,s.trigger("fixed.ScrollToFixed");N(n)}else if(!E()||!t)A(),s.trigger("preUnfixed.ScrollToFixed"),T(),s.trigger("unfixed.ScrollToFixed")}else f>0?o+e(window).height()-s.outerHeight(!0)>=f-(C()||-L())?b()&&(A(),s.trigger("preUnfixed.ScrollToFixed"),u==="absolute"?x():T(),s.trigger("unfixed.ScrollToFixed")):(b()||(A(),s.trigger("preFixed.ScrollToFixed"),S()),N(n),s.trigger("fixed.ScrollToFixed")):N(n)}function L(){return r.options.bottom?r.options.bottom:0}function A(){var e=s.css("position");e=="absolute"?s.trigger("postAbsolute.ScrollToFixed"):e=="fixed"?s.trigger("postFixed.ScrollToFixed"):s.trigger("postUnfixed.ScrollToFixed")}var r=this;r.$el=e(t),r.el=t,r.$el.data("ScrollToFixed",r);var i=!1,s=r.$el,o,u,f,l=0,c=0,h=-1,p=-1,d=null,v,m,O=function(e){s.is(":visible")&&(i=!1,k())},M=function(e){k()},_=function(){var e=document.body;if(document.createElement&&e&&e.appendChild&&e.removeChild){var t=document.createElement("div");if(!t.getBoundingClientRect)return null;t.innerHTML="x",t.style.cssText="position:fixed;top:100px;",e.appendChild(t);var n=e.style.height,r=e.scrollTop;e.style.height="3000px",e.scrollTop=500;var i=t.getBoundingClientRect().top;e.style.height=n;var s=i===100;return e.removeChild(t),e.scrollTop=r,s}return null},D=function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1};r.init=function(){r.options=e.extend({},e.ScrollToFixed.defaultOptions,n),r.$el.css("z-index",r.options.zIndex),d=e("<div />"),o=s.css("position"),u=s.css("position"),f=e.extend({},s.offset()),E()&&r.$el.after(d),e(window).bind("resize.ScrollToFixed",O),e(window).bind("scroll.ScrollToFixed",M),r.options.preFixed&&s.bind("preFixed.ScrollToFixed",r.options.preFixed),r.options.postFixed&&s.bind("postFixed.ScrollToFixed",r.options.postFixed),r.options.preUnfixed&&s.bind("preUnfixed.ScrollToFixed",r.options.preUnfixed),r.options.postUnfixed&&s.bind("postUnfixed.ScrollToFixed",r.options.postUnfixed),r.options.preAbsolute&&s.bind("preAbsolute.ScrollToFixed",r.options.preAbsolute),r.options.postAbsolute&&s.bind("postAbsolute.ScrollToFixed",r.options.postAbsolute),r.options.fixed&&s.bind("fixed.ScrollToFixed",r.options.fixed),r.options.unfixed&&s.bind("unfixed.ScrollToFixed",r.options.unfixed),r.options.spacerClass&&d.addClass(r.options.spacerClass),s.bind("resize.ScrollToFixed",function(){d.height(s.height())}),s.bind("scroll.ScrollToFixed",function(){s.trigger("preUnfixed.ScrollToFixed"),T(),s.trigger("unfixed.ScrollToFixed"),k()}),s.bind("detach.ScrollToFixed",function(t){D(t),s.trigger("preUnfixed.ScrollToFixed"),T(),s.trigger("unfixed.ScrollToFixed"),e(window).unbind("resize.ScrollToFixed",O),e(window).unbind("scroll.ScrollToFixed",M),s.unbind(".ScrollToFixed"),r.$el.removeData("ScrollToFixed")}),O()},r.init()},e.ScrollToFixed.defaultOptions={marginTop:0,limit:0,bottom:-1,zIndex:1e3},e.fn.scrollToFixed=function(t){return this.each(function(){new e.ScrollToFixed(this,t)})}}(jQuery),function(e,t,n,r){function o(t,n){this.$el=e(t),this.$el.data({"original-position":this.$el.css("position"),"original-top":this.$el.css("top"),"original-left":this.$el.css("left")}),this.options=e.extend({},s,n),this._defaults=s,this._name=i;if(!e.isFunction(this.options.bottom)){var r=this.options.bottom;this.options.bottom=function(){return r}}this.states={ABOVE:"above",STUCK:"stuck",BELOW:"below"},this.init()}var i="stickybuns",s={marginTop:20,bottom:function(){return e(n).height()},pollInterval:500};o.prototype={init:function(){this.$el.addClass("stickybuns-static"),this.$wrapper=e("<div class='stickybuns-wrapper' style='position: relative;'></div>").insertBefore(this.$el).wrapInner(this.$el),this.bindEvents(),this.setDimensions(),this.startPolling()},destroy:function(){this.unbindEvents(),this.stopPolling()},bindEvents:function(){e(t).on("scroll.stickybuns",e.proxy(this.handleScroll,this))},unbindEvents:function(){e(t).off("scroll.stickybuns")},setDimensions:function(){this.stickyZoneTop=this.$wrapper.offset().top-this.options.marginTop,this.stickyZoneBottom=this.options.bottom()-this.$el.height(),this.wrapperOffsetLeft=this.$wrapper.offset().left,this.handleScroll()},startPolling:function(){var t=this;this.pollInterval=setInterval(e.proxy(this.setDimensions,this),this.options.pollInterval)},stopPolling:function(){clearInterval(this.pollInterval)},setState:function(e){this.state!=e&&(this.$el.removeClass("stickybuns-"+this.state),this.state=e,this.$el.addClass("stickybuns-"+this.state).css(this.getElementStyles()))},getElementStyles:function(){if(this.state==this.states.ABOVE)return{position:this.$el.data("original-position"),top:this.$el.data("original-top"),left:this.$el.data("original-left"),width:"auto"};if(this.state==this.states.STUCK)return{position:"fixed",top:this.options.marginTop,width:this.$el.width()};if(this.state==this.states.BELOW)return{position:"absolute",top:this.stickyZoneBottom-this.stickyZoneTop,left:0,width:"auto"}},handleScroll:function(){var n=e(t).scrollTop();if(n<this.stickyZoneTop)this.setState(this.states.ABOVE);else if(n<this.stickyZoneBottom){this.setState(this.states.STUCK);var r=e(t).scrollLeft();this.$el.css({left:this.wrapperOffsetLeft-r})}else this.setState(this.states.BELOW)}},e.fn[i]=function(t){return this.each(function(){e.data(this,"plugin_"+i)||e.data(this,"plugin_"+i,new o(this,t))})}}(jQuery,window,document),function(e,t,n,r){if(t.DeferredEvents)return;t.DeferredEvents={};var i=function(n,r,i,s){var o=new e.Deferred;n.on(r,function(){s?setTimeout(function(){o.resolve()},0):o.resolve()}),t.DeferredEvents[i]=function(e){o.done(e)}};i(e(t),"load","onWindowLoad"),i(e(t),"load","afterWindowLoad",!0),i(e(n),"ready","onDocumentReady"),i(e(n),"ready","afterDocumentReady",!0)}(jQuery,window,document);var Swiper=function(e,t,n){function i(e){return document.querySelectorAll(e)}function T(){var e=p-m;return t.loop&&(e-=m),t.scrollContainer&&(e=c-m,e<0&&(e=0)),t.slidesPerSlide>s.slides.length&&(e=0),e}function N(){var e=0;return t.loop&&(e=m),e}function L(e){s.allowLinks||(e.preventDefault?e.preventDefault():e.returnValue=!1)}function P(e){if(s.isTouched||t.onlyExternal)return!1;if(t.preventClassNoSwiping&&e.target&&e.target.className.indexOf("NoSwiping")>-1)return!1;s.isTouched=!0,_=e.type=="touchstart";if(!_||e.targetTouches.length==1){s.callPlugins("onTouchStartBegin"),t.loop&&s.fixLoop(),_||(e.preventDefault?e.preventDefault():e.returnValue=!1);var n=_?e.targetTouches[0].pageX:e.pageX||e.clientX,r=_?e.targetTouches[0].pageY:e.pageY||e.clientY;s.touches.startX=s.touches.currentX=n,s.touches.startY=s.touches.currentY=r,s.touches.start=s.touches.current=l?s.touches.startX:s.touches.startY,s.setTransition(0),s.positions.start=s.positions.current=l?s.getTranslate("x"):s.getTranslate("y"),l?s.setTransform(s.positions.start,0,0):s.setTransform(0,s.positions.start,0);var i=new Date;s.times.start=i.getTime(),v=undefined,(t.onSlideClick||t.onSlideTouch)&&function(){var e=s.container,i=e.getBoundingClientRect(),o=document.body,u=e.clientTop||o.clientTop||0,a=e.clientLeft||o.clientLeft||0,f=window.pageYOffset||e.scrollTop,h=window.pageXOffset||e.scrollLeft,p=n-i.left+a-h,d=r-i.top-u-f,v=l?p:d,m=-Math.round(s.positions.current/c),g=Math.floor(v/c)+m,y=g;if(t.loop){var y=g-t.slidesPerSlide;y<0&&(y=s.slides.length+y-t.slidesPerSlide*2)}s.clickedSlideIndex=y,s.clickedSlide=s.getSlide(g),t.onSlideTouch&&(t.onSlideTouch(s),s.callPlugins("onSlideTouch"))}(),t.moveStartThreshold>0&&(D=!1),t.onTouchStart&&t.onTouchStart(s),s.callPlugins("onTouchStartEnd")}}function H(e){if(!s.isTouched||t.onlyExternal)return;if(_&&e.type=="mousemove")return;var n=_?e.targetTouches[0].pageX:e.pageX||e.clientX,r=_?e.targetTouches[0].pageY:e.pageY||e.clientY;typeof v=="undefined"&&l&&(v=!!(v||Math.abs(r-s.touches.startY)>Math.abs(n-s.touches.startX))),typeof v=="undefined"&&!l&&(v=!!(v||Math.abs(r-s.touches.startY)<Math.abs(n-s.touches.startX)));if(v){s.isTouched=!1;return}if(e.assignedToSwiper){s.isTouched=!1;return}e.assignedToSwiper=!0,t.preventLinks&&(s.allowLinks=!1),t.autoPlay&&s.stopAutoPlay();if(!_||e.touches.length==1){s.callPlugins("onTouchMoveStart"),e.preventDefault?e.preventDefault():e.returnValue=!1,s.touches.current=l?n:r,s.positions.current=(s.touches.current-s.touches.start)*t.ratio+s.positions.start;if(t.resistance){if(s.positions.current>0&&(!t.freeMode||!!t.freeModeFluid)){if(t.loop){var i=1;s.positions.current>0&&(s.positions.current=0)}else var i=(m*2-s.positions.current)/m/2;i<.5?s.positions.current=m/2:s.positions.current=s.positions.current*i,t.nopeek&&(s.positions.current=0)}if(s.positions.current<-T()&&(!t.freeMode||!!t.freeModeFluid)){if(t.loop)var i=1,o=s.positions.current,u=-T()-m;else var a=(s.touches.current-s.touches.start)*t.ratio+(T()+s.positions.start),i=(m+a)/m,o=s.positions.current-a*(1-i)/2,u=-T()-m/2;t.nopeek&&(o=s.positions.current-a,u=-T()),o<u||i<=0?s.positions.current=u:s.positions.current=o}}if(!t.followFinger)return;return t.moveStartThreshold?Math.abs(s.touches.current-s.touches.start)>t.moveStartThreshold||D?(D=!0,l?s.setTransform(s.positions.current,0,0):s.setTransform(0,s.positions.current,0)):s.positions.current=s.positions.start:l?s.setTransform(s.positions.current,0,0):s.setTransform(0,s.positions.current,0),t.freeMode&&s.updateActiveSlide(s.positions.current),t.onSlideClick&&s.clickedSlide&&(s.clickedSlide=!1),t.grabCursor&&(s.container.style.cursor="move",s.container.style.cursor="grabbing",s.container.style.cursor="-moz-grabbin",s.container.style.cursor="-webkit-grabbing"),s.callPlugins("onTouchMoveEnd"),t.onTouchMove&&t.onTouchMove(s),!1}}function B(e){v&&s.swipeReset();if(t.onlyExternal||!s.isTouched)return;s.isTouched=!1,t.grabCursor&&(s.container.style.cursor="move",s.container.style.cursor="grab",s.container.style.cursor="-moz-grab",s.container.style.cursor="-webkit-grab"),t.onSlideClick&&s.clickedSlide&&(t.onSlideClick(s),s.callPlugins("onSlideClick")),!s.positions.current&&s.positions.current!==0&&(s.positions.current=s.positions.start),t.followFinger&&(l?s.setTransform(s.positions.current,0,0):s.setTransform(0,s.positions.current,0));var n=new Date;s.times.end=n.getTime(),s.touches.diff=s.touches.current-s.touches.start,s.touches.abs=Math.abs(s.touches.diff),s.positions.diff=s.positions.current-s.positions.start,s.positions.abs=Math.abs(s.positions.diff);var r=s.positions.diff,i=s.positions.abs;i<5&&s.times.end-s.times.start<300&&s.allowLinks==0&&(s.swipeReset(),t.preventLinks&&(s.allowLinks=!0));var o=p-m;t.scrollContainer&&(o=c-m);if(s.positions.current>0){s.swipeReset(),t.onTouchEnd&&t.onTouchEnd(s),s.callPlugins("onTouchEnd");return}if(s.positions.current<-o){s.swipeReset(),t.onTouchEnd&&t.onTouchEnd(s),s.callPlugins("onTouchEnd");return}if(t.freeMode){if(s.times.end-s.times.start<300&&t.freeModeFluid){var u=s.positions.current+s.touches.diff*2;u<o*-1&&(u=-o),u>0&&(u=0),l?s.setTransform(u,0,0):s.setTransform(0,u,0),s.setTransition((s.times.end-s.times.start)*2),s.updateActiveSlide(u)}(!t.freeModeFluid||s.times.end-s.times.start>=300)&&s.updateActiveSlide(s.positions.current),t.onTouchEnd&&t.onTouchEnd(s),s.callPlugins("onTouchEnd");return}d=r<0?"toNext":"toPrev",d=="toNext"&&s.times.end-s.times.start<=300&&(i<30||!t.shortSwipes?s.swipeReset():s.swipeNext(!0)),d=="toPrev"&&s.times.end-s.times.start<=300&&(i<30||!t.shortSwipes?s.swipeReset():s.swipePrev(!0));var a=c*t.slidesPerGroup;d=="toNext"&&s.times.end-s.times.start>300&&(i>=a*.5?s.swipeNext(!0):s.swipeReset()),d=="toPrev"&&s.times.end-s.times.start>300&&(i>=a*.5?s.swipePrev(!0):s.swipeReset()),t.onTouchEnd&&t.onTouchEnd(s),s.callPlugins("onTouchEnd")}function F(){s.callPlugins("onSlideChangeStart"),t.onSlideChangeStart&&(t.queueStartCallbacks&&!s._queueStartCallbacks?(s._queueStartCallbacks=!0,t.onSlideChangeStart(s),s.transitionEnd(function(){s._queueStartCallbacks=!1})):t.queueStartCallbacks||t.onSlideChangeStart(s)),t.onSlideChangeEnd&&(t.queueEndCallbacks&&!s.queueEndCallbacks?s.support.transitions?(s._queueEndCallbacks=!0,s.transitionEnd(t.onSlideChangeEnd)):setTimeout(function(){t.onSlideChangeEnd(s)},10):t.queueEndCallbacks||(s.support.transitions?s.transitionEnd(t.onSlideChangeEnd):setTimeout(function(){t.onSlideChangeEnd(s)},10)))}window.addEventListener||(window.Element||(Element=function(){}),Element.prototype.addEventListener=HTMLDocument.prototype.addEventListener=addEventListener=function(e,t,n){this.attachEvent("on"+e,t)},Element.prototype.removeEventListener=HTMLDocument.prototype.removeEventListener=removeEventListener=function(e,t,n){this.detachEvent("on"+e,t)});if(document.body.__defineGetter__&&HTMLElement){var r=HTMLElement.prototype;r.__defineGetter__&&r.__defineGetter__("outerHTML",function(){return(new XMLSerializer).serializeToString(this)})}window.getComputedStyle||(window.getComputedStyle=function(e,t){return this.el=e,this.getPropertyValue=function(t){var n=/(\-([a-z]){1})/g;return t=="float"&&(t="styleFloat"),n.test(t)&&(t=t.replace(n,function(){return arguments[2].toUpperCase()})),e.currentStyle[t]?e.currentStyle[t]:null},this});if(!e.nodeType)if(!document.querySelectorAll||document.querySelectorAll(e).length==0)return;var s=this;s.touches={},s.positions={current:0},s.id=(new Date).getTime(),s.container=e.nodeType?e:i(e)[0],s.times={},s.isTouched=!1,s.realIndex=0,s.activeSlide=0,s.activeIndex=0,s.previousSlide=null,s.previousIndex=null,s.langDirection=window.getComputedStyle(s.container,null).getPropertyValue("direction"),s.support={touch:s.isSupportTouch(),threeD:s.isSupport3D(),transitions:s.isSupportTransitions()},s.use3D=s.support.threeD;var o={mode:"horizontal",ratio:1,speed:300,freeMode:!1,freeModeFluid:!1,slidesPerSlide:1,slidesPerGroup:1,simulateTouch:!0,followFinger:!0,shortSwipes:!0,moveStartThreshold:!1,autoPlay:!1,onlyExternal:!1,createPagination:!0,pagination:!1,resistance:!0,nopeek:!1,scrollContainer:!1,preventLinks:!0,preventClassNoSwiping:!0,initialSlide:0,keyboardControl:!1,mousewheelControl:!1,resizeEvent:"auto",useCSS3Transforms:!0,queueStartCallbacks:!1,queueEndCallbacks:!1,slideElement:"div",slideClass:"swiper-slide",wrapperClass:"swiper-wrapper",paginationClass:"swiper-pagination-switch",paginationActiveClass:"swiper-active-switch"};t=t||{};for(var u in o)u in t||(t[u]=o[u]);s.params=t,t.scrollContainer&&(t.freeMode=!0,t.freeModeFluid=!0);var a=!1;t.slidesPerSlide=="auto"&&(a=!0,t.slidesPerSlide=1);var f,l,c,h,p,d,v,m;for(var g=s.container.childNodes.length-1;g>=0;g--)if(s.container.childNodes[g].className){var y=s.container.childNodes[g].className.split(" ");for(var b=0;b<y.length;b++)y[b]===t.wrapperClass&&(f=s.container.childNodes[g])}s.wrapper=f,l=t.mode=="horizontal",s.touchEvents={touchStart:s.support.touch||!t.simulateTouch?"touchstart":s.ie10?"MSPointerDown":"mousedown",touchMove:s.support.touch||!t.simulateTouch?"touchmove":s.ie10?"MSPointerMove":"mousemove",touchEnd:s.support.touch||!t.simulateTouch?"touchend":s.ie10?"MSPointerUp":"mouseup"},s._extendSwiperSlide=function(e){return e.append=function(){return s.wrapper.appendChild(e),s.reInit(),e},e.prepend=function(){return s.wrapper.insertBefore(e,s.wrapper.firstChild),s.reInit(),e},e.insertAfter=function(t){if(typeof t=="undefined")return!1;var n=s.slides[t+1];return s.wrapper.insertBefore(e,n),s.reInit(),e},e.clone=function(){return s._extendSwiperSlide(e.cloneNode(!0))},e.remove=function(){s.wrapper.removeChild(e),s.reInit()},e.html=function(t){return typeof t=="undefined"?e.innerHTML:(e.innerHTML=t,e)},e.index=function(){var t;for(var n=s.slides.length-1;n>=0;n--)e==s.slides[n]&&(t=n);return t},e.isActive=function(){return e.index()==s.activeIndex?!0:!1},e.swiperSlideDataStorage||(e.swiperSlideDataStorage={}),e.getData=function(t){return e.swiperSlideDataStorage[t]},e.setData=function(t,n){return e.swiperSlideDataStorage[t]=n,e},e.data=function(t,n){return n?(e.setAttribute("data-"+t,n),e):e.getAttribute("data-"+t)},e},s._calcSlides=function(){var e=s.slides?s.slides.length:!1;s.slides=[];for(var n=0;n<s.wrapper.childNodes.length;n++)if(s.wrapper.childNodes[n].className){var r=s.wrapper.childNodes[n].className.split(" ");for(var i=0;i<r.length;i++)r[i]===t.slideClass&&s.slides.push(s.wrapper.childNodes[n])}for(var n=s.slides.length-1;n>=0;n--)s._extendSwiperSlide(s.slides[n]);if(!e)return;e!=s.slides.length&&s.createPagination&&(s.createPagination(),s.callPlugins("numberOfSlidesChanged"))},s._calcSlides(),s.createSlide=function(e,n,r){var n=n||s.params.slideClass,r=r||t.slideElement,i=document.createElement(r);return i.innerHTML=e||"",i.className=n,s._extendSwiperSlide(i)},s.appendSlide=function(e,t,n){if(!e)return;return e.nodeType?s._extendSwiperSlide(e).append():s.createSlide(e,t,n).append()},s.prependSlide=function(e,t,n){if(!e)return;return e.nodeType?s._extendSwiperSlide(e).prepend():s.createSlide(e,t,n).prepend()},s.insertSlideAfter=function(e,t,n,r){return e?t.nodeType?s._extendSwiperSlide(t).insertAfter(e):s.createSlide(t,n,r).insertAfter(e):!1},s.removeSlide=function(e){return s.slides[e]?(s.slides[e].remove(),!0):!1},s.removeLastSlide=function(){return s.slides.length>0?(s.slides[s.slides.length-1].remove(),!0):!1},s.removeAllSlides=function(){for(var e=s.slides.length-1;e>=0;e--)s.slides[e].remove()},s.getSlide=function(e){return s.slides[e]},s.getLastSlide=function(){return s.slides[s.slides.length-1]},s.getFirstSlide=function(){return s.slides[0]},s.currentSlide=function(){return s.slides[s.activeIndex]};var w=[];for(var E in s.plugins)if(t[E]){var S=s.plugins[E](s,t[E]);S&&w.push(S)}s.callPlugins=function(e,t){t||(t={});for(var n=0;n<w.length;n++)e in w[n]&&w[n][e](t)},s.ie10&&!t.onlyExternal&&(l?s.wrapper.classList.add("swiper-wp8-horizontal"):s.wrapper.classList.add("swiper-wp8-vertical")),t.loop&&function(){h=s.slides.length;if(s.slides.length==0)return;var e="",n="";for(var r=0;r<t.slidesPerSlide;r++)e+=s.slides[r].outerHTML;for(var r=h-t.slidesPerSlide;r<h;r++)n+=s.slides[r].outerHTML;f.innerHTML=n+f.innerHTML+e,s._calcSlides(),s.callPlugins("onCreateLoop")}();var x=!1;s.reInit=function(){s.init(!0)},s.init=function(e){var n=window.getComputedStyle(s.container,null).getPropertyValue("width"),r=window.getComputedStyle(s.container,null).getPropertyValue("height"),i=parseInt(n,10),o=parseInt(r,10);if(isNaN(i)||n.indexOf("%")>0)i=s.container.offsetWidth-parseInt(window.getComputedStyle(s.container,null).getPropertyValue("padding-left"),10)-parseInt(window.getComputedStyle(s.container,null).getPropertyValue("padding-right"),10);if(isNaN(o)||r.indexOf("%")>0)o=s.container.offsetHeight-parseInt(window.getComputedStyle(s.container,null).getPropertyValue("padding-top"),10)-parseInt(window.getComputedStyle(s.container,null).getPropertyValue("padding-bottom"),10);if(!e&&s.width==i&&s.height==o)return;if(e||x)s._calcSlides(),t.pagination&&s.updatePagination();s.width=i,s.height=o;var u=l?1:t.slidesPerSlide,d=l?t.slidesPerSlide:1,v,g,y,b;h=s.slides.length,t.scrollContainer?(l||(f.style.width="",f.style.height="",s.slides[0].style.width="",s.slides[0].style.height=""),v=s.slides[0].offsetWidth,g=s.slides[0].offsetHeight,m=l?s.width:s.height,c=l?v:g,y=v,b=g):(a?(v=s.slides[0].offsetWidth,g=s.slides[0].offsetHeight):(v=s.width/d,g=s.height/u),m=l?s.width:s.height,c=l?v:g,y=l?h*v:s.width,b=l?s.height:h*g,a&&(t.slidesPerSlide=Math.round(m/c))),p=l?y:b;for(var w=0;w<s.slides.length;w++){var E=s.slides[w];a||(E.style.width=v+"px",E.style.height=g+"px"),t.onSlideInitialize&&t.onSlideInitialize(s,E)}f.style.width=y+"px",f.style.height=b+"px",t.initialSlide>0&&t.initialSlide<h&&!x&&(s.realIndex=s.activeIndex=t.initialSlide,t.loop&&(s.activeIndex=s.realIndex-t.slidesPerSlide),s.activeSlide=s.activeIndex,l?(s.positions.current=-t.initialSlide*v,s.setTransform(s.positions.current,0,0)):(s.positions.current=-t.initialSlide*g,s.setTransform(0,s.positions.current,0))),x?s.callPlugins("onInit"):s.callPlugins("onFirstInit"),x=!0},s.init(),s.updatePagination=function(){if(s.slides.length<2)return;var e=i(t.pagination+" ."+t.paginationActiveClass);if(!e)return;for(var n=0;n<e.length;n++)e.item(n).className=t.paginationClass;var r=i(t.pagination+" ."+t.paginationClass).length,o=t.loop?s.realIndex-t.slidesPerSlide:s.realIndex,u=o+(t.slidesPerSlide-1);for(var n=o;n<=u;n++){var a=n;a>=r&&(a-=r),a<0&&(a=r+a),a<h&&(i(t.pagination+" ."+t.paginationClass).item(a).className=t.paginationClass+" "+t.paginationActiveClass),n==o&&(i(t.pagination+" ."+t.paginationClass).item(a).className+=" swiper-activeslide-switch")}},s.createPagination=function(){if(t.pagination&&t.createPagination){var e="",n=s.slides.length,r=t.loop?n-t.slidesPerSlide*2:n;for(var o=0;o<r;o++)e+='<span class="'+t.paginationClass+'"></span>';i(t.pagination)[0].innerHTML=e,s.updatePagination(),s.callPlugins("onCreatePagination")}},s.createPagination(),s.resizeEvent=t.resizeEvent==="auto"?"onorientationchange"in window?"orientationchange":"resize":t.resizeEvent,s.resizeFix=function(){s.callPlugins("beforeResizeFix"),s.init();if(!t.scrollContainer)s.swipeTo(s.activeIndex,0,!1);else{var e=l?s.getTranslate("x"):s.getTranslate("y");if(e<-T()){var n=l?-T():0,r=l?0:-T();s.setTransition(0),s.setTransform(n,r,0)}}s.callPlugins("afterResizeFix")},t.disableAutoResize||window.addEventListener(s.resizeEvent,s.resizeFix,!1);var C;s.startAutoPlay=function(){t.autoPlay&&!t.loop?C=setInterval(function(){var e=s.realIndex+1;e==h&&(e=0),e==h-t.slidesPerSlide+1&&(e=0),s.swipeTo(e)},t.autoPlay):t.autoPlay&&t.loop&&(C=setInterval(function(){s.fixLoop(),s.swipeNext(!0)},t.autoPlay)),s.callPlugins("onAutoPlayStart")},s.stopAutoPlay=function(){C&&clearInterval(C),s.callPlugins("onAutoPlayStop")},t.autoPlay&&s.startAutoPlay(),s.ie10?(f.addEventListener(s.touchEvents.touchStart,P,!1),document.addEventListener(s.touchEvents.touchMove,H,!1),document.addEventListener(s.touchEvents.touchEnd,B,!1)):(s.support.touch&&(f.addEventListener("touchstart",P,!1),f.addEventListener("touchmove",H,!1),f.addEventListener("touchend",B,!1)),t.simulateTouch&&(f.addEventListener("mousedown",P,!1),document.addEventListener("mousemove",H,!1),document.addEventListener("mouseup",B,!1))),s.destroy=function(e){e=e===!1?e:e||!0,e&&window.removeEventListener(s.resizeEvent,s.resizeFix,!1),s.ie10?(f.removeEventListener(s.touchEvents.touchStart,P,!1),document.removeEventListener(s.touchEvents.touchMove,H,!1),document.removeEventListener(s.touchEvents.touchEnd,B,!1)):(s.support.touch&&(f.removeEventListener("touchstart"
,P,!1),f.removeEventListener("touchmove",H,!1),f.removeEventListener("touchend",B,!1)),f.removeEventListener("mousedown",P,!1),document.removeEventListener("mousemove",H,!1),document.removeEventListener("mouseup",B,!1)),t.keyboardControl&&document.removeEventListener("keydown",A,!1),t.mousewheelControl&&s._wheelEvent&&s.container.removeEventListener(s._wheelEvent,M,!1),t.autoPlay&&s.stopAutoPlay(),s.callPlugins("onDestroy")},s.allowLinks=!0;if(t.preventLinks){var k=s.container.querySelectorAll("a");for(var g=0;g<k.length;g++)k[g].addEventListener("click",L,!1)}if(t.keyboardControl){function A(e){var t=e.keyCode||e.charCode;l?((t==37||t==39)&&e.preventDefault(),t==39&&s.swipeNext(),t==37&&s.swipePrev()):((t==38||t==40)&&e.preventDefault(),t==40&&s.swipeNext(),t==38&&s.swipePrev())}document.addEventListener("keydown",A,!1)}s._wheelEvent=!1;if(t.mousewheelControl){document.onmousewheel!==undefined&&(s._wheelEvent="mousewheel");try{WheelEvent("wheel"),s._wheelEvent="wheel"}catch(O){}s._wheelEvent||(s._wheelEvent="DOMMouseScroll");function M(e){var n=s._wheelEvent,r;e.detail?r=-e.detail:n=="mousewheel"?r=e.wheelDelta:n=="DOMMouseScroll"?r=-e.detail:n=="wheel"&&(r=Math.abs(e.deltaX)>Math.abs(e.deltaY)?-e.deltaX:-e.deltaY);if(!t.freeMode)r<0?s.swipeNext():s.swipePrev();else{var i=l?s.getTranslate("x"):s.getTranslate("y"),o,u;l?(o=s.getTranslate("x")+r,u=s.getTranslate("y"),o>0&&(o=0),o<-T()&&(o=-T())):(o=s.getTranslate("x"),u=s.getTranslate("y")+r,u>0&&(u=0),u<-T()&&(u=-T())),s.setTransition(0),s.setTransform(o,u,0)}return e.preventDefault?e.preventDefault():e.returnValue=!1,!1}s._wheelEvent&&s.container.addEventListener(s._wheelEvent,M,!1)}t.grabCursor&&(s.container.style.cursor="move",s.container.style.cursor="grab",s.container.style.cursor="-moz-grab",s.container.style.cursor="-webkit-grab");var _=!1,D;s.swipeNext=function(e){!e&&t.loop&&s.fixLoop(),!e&&t.autoPlay&&s.stopAutoPlay(),s.callPlugins("onSwipeNext");var n=l?s.getTranslate("x"):s.getTranslate("y"),r=c*t.slidesPerGroup,i=Math.floor(Math.abs(n)/Math.floor(r))*r+r,o=Math.abs(n);if(i==p)return;if(o>=T()&&!t.loop)return;return i>T()&&!t.loop&&(i=T()),t.loop&&i>=T()+m&&(i=T()+m),l?s.setTransform(-i,0,0):s.setTransform(0,-i,0),s.setTransition(t.speed),s.updateActiveSlide(-i),F(),!0},s.swipePrev=function(e){!e&&t.loop&&s.fixLoop(),!e&&t.autoPlay&&s.stopAutoPlay(),s.callPlugins("onSwipePrev");var n=Math.ceil(l?s.getTranslate("x"):s.getTranslate("y")),r=c*t.slidesPerGroup,i=(Math.ceil(-n/r)-1)*r;return i<0&&(i=0),l?s.setTransform(-i,0,0):s.setTransform(0,-i,0),s.setTransition(t.speed),s.updateActiveSlide(-i),F(),!0},s.swipeReset=function(e){s.callPlugins("onSwipeReset");var n=l?s.getTranslate("x"):s.getTranslate("y"),r=c*t.slidesPerGroup,i=n<0?Math.round(n/r)*r:0,o=-T();return t.scrollContainer&&(i=n<0?n:0,o=m-c),i<=o&&(i=o),t.scrollContainer&&m>c&&(i=0),t.mode=="horizontal"?s.setTransform(i,0,0):s.setTransform(0,i,0),s.setTransition(t.speed),s.updateActiveSlide(i),t.onSlideReset&&t.onSlideReset(s),!0};var j=!0;s.swipeTo=function(e,n,r){e=parseInt(e,10),s.callPlugins("onSwipeTo",{index:e,speed:n});if(e>h-1)return;if(e<0&&!t.loop)return;r=r===!1?!1:r||!0;var n=n===0?n:n||t.speed;t.loop&&(e+=t.slidesPerSlide),e>h-t.slidesPerSlide&&(e=h-t.slidesPerSlide);var i=-e*c;return j&&t.loop&&t.initialSlide>0&&t.initialSlide<h&&(i-=t.initialSlide*c,j=!1),l?s.setTransform(i,0,0):s.setTransform(0,i,0),s.setTransition(n),s.updateActiveSlide(i),r&&F(),!0},s._queueStartCallbacks=!1,s._queueEndCallbacks=!1,s.updateActiveSlide=function(e){s.previousIndex=s.previousSlide=s.realIndex,s.realIndex=Math.round(-e/c),t.loop?(s.activeIndex=s.realIndex-t.slidesPerSlide,s.activeIndex>=h-t.slidesPerSlide*2&&(s.activeIndex=h-t.slidesPerSlide*2-s.activeIndex),s.activeIndex<0&&(s.activeIndex=h-t.slidesPerSlide*2+s.activeIndex)):s.activeIndex=s.realIndex,s.realIndex==h&&(s.realIndex=h-1),s.realIndex<0&&(s.realIndex=0),s.activeSlide=s.activeIndex,t.pagination&&s.updatePagination()},s.fixLoop=function(){if(s.realIndex<t.slidesPerSlide){var e=h-t.slidesPerSlide*3+s.realIndex;s.swipeTo(e,0,!1)}if(s.realIndex>h-t.slidesPerSlide*2){var e=-h+s.realIndex+t.slidesPerSlide;s.swipeTo(e,0,!1)}},t.loop&&s.swipeTo(0,0,!1)};Swiper.prototype={plugins:{},transitionEnd:function(e,t){var n=this,r=n.wrapper,i=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"];if(e){function s(){e(n),n._queueEndCallbacks=!1;if(!t)for(var o=0;o<i.length;o++)r.removeEventListener(i[o],s,!1)}for(var o=0;o<i.length;o++)r.addEventListener(i[o],s,!1)}},isSupportTouch:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch},isSupportTransitions:function(){var e=document.createElement("div").style;return"transition"in e||"WebkitTransition"in e||"MozTransition"in e||"msTransition"in e||"MsTransition"in e||"OTransition"in e},isSupport3D:function(){var e=document.createElement("div");e.id="test3d";var t=!1;"webkitPerspective"in e.style&&(t=!0),"MozPerspective"in e.style&&(t=!0),"OPerspective"in e.style&&(t=!0),"MsPerspective"in e.style&&(t=!0),"perspective"in e.style&&(t=!0);if(t&&"webkitPerspective"in e.style){var n=document.createElement("style");n.textContent="@media (-webkit-transform-3d), (transform-3d), (-moz-transform-3d), (-o-transform-3d), (-ms-transform-3d) {#test3d{height:5px}}",document.getElementsByTagName("head")[0].appendChild(n),document.body.appendChild(e),t=e.offsetHeight===5,n.parentNode.removeChild(n),e.parentNode.removeChild(e)}return t},getTranslate:function(e){var t=this.wrapper,n,r;if(window.WebKitCSSMatrix){var i=new WebKitCSSMatrix(window.getComputedStyle(t,null).webkitTransform);n=i.toString().split(",")}else{var i=window.getComputedStyle(t,null).MozTransform||window.getComputedStyle(t,null).OTransform||window.getComputedStyle(t,null).MsTransform||window.getComputedStyle(t,null).msTransform||window.getComputedStyle(t,null).transform||window.getComputedStyle(t,null).getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,");n=i.toString().split(",")}return this.params.useCSS3Transforms?(e=="x"&&(n.length==16?r=parseFloat(n[12]):window.WebKitCSSMatrix?r=i.m41:r=parseFloat(n[4])),e=="y"&&(n.length==16?r=parseFloat(n[13]):window.WebKitCSSMatrix?r=i.m42:r=parseFloat(n[5]))):(e=="x"&&(r=parseFloat(t.style.left,10)||0),e=="y"&&(r=parseFloat(t.style.top,10)||0)),r},setTransform:function(e,t,n){var r=this.wrapper.style;e=e||0,t=t||0,n=n||0,this.params.useCSS3Transforms?this.support.threeD?r.webkitTransform=r.MsTransform=r.msTransform=r.MozTransform=r.OTransform=r.transform="translate3d("+e+"px, "+t+"px, "+n+"px)":(r.webkitTransform=r.MsTransform=r.msTransform=r.MozTransform=r.OTransform=r.transform="translate("+e+"px, "+t+"px)",this.ie8&&(r.left=e+"px",r.top=t+"px")):(r.left=e+"px",r.top=t+"px"),this.callPlugins("onSetTransform",{x:e,y:t,z:n})},setTransition:function(e){var t=this.wrapper.style;t.webkitTransitionDuration=t.MsTransitionDuration=t.msTransitionDuration=t.MozTransitionDuration=t.OTransitionDuration=t.transitionDuration=e/1e3+"s",this.callPlugins("onSetTransition",{duration:e})},ie8:function(){var e=-1;if(navigator.appName=="Microsoft Internet Explorer"){var t=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");n.exec(t)!=null&&(e=parseFloat(RegExp.$1))}return e!=-1&&e<9}(),ie10:window.navigator.msPointerEnabled},(window.jQuery||window.Zepto)&&function(e){e.fn.swiper=function(t){var n=new Swiper(e(this)[0],t);return e(this).data("swiper",n),n}}(window.jQuery||window.Zepto),AT.Keycodes={ESC:27,LEFT_ARROW:37,RIGHT_ARROW:39},AT.Util=AT.Util||{},AT.Util.supportsFullScreen=function(e){return e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullscreen?!0:!1},AT.Util.enterFullScreen=function(e){(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)&&AT.Util.exitFullScreen(),e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)},AT.Util.exitFullScreen=function(){document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()},function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.4";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?null:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,0,t):e[0]},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,Math.max(e.length-t,0)):e[e.length-1]},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s},x.bind=function(e,t){if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));var n=u.call(arguments,2);return function(){return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return t.length===0&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,f<=0?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]==null&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var O=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if(i=="[object Array]"){o=e.length,u=o==t.length;if(u)while(o--)if(!(u=O(e[o],t[o],n,r)))break}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)){o++;if(!(u=x.has(t,c)&&O(e[c],t[c],n,r)))break}if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return O(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){var r=Array(e);for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=x.invert(M.escape);var _={escape:new RegExp("["+x.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(M.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(_[e],function(t){return M[e][t]})}}),x.result=function(e,t){if(e==null)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),j.call(this,n.apply(x,e))}})};var D=0;x.uniqueId=function(e){var t=++D+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(B,function(e){return"\\"+H[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var j=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],j.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this);var Handlebars={};Handlebars.VERSION="1.0.beta.6",Handlebars.helpers={},Handlebars.partials={},Handlebars.registerHelper=function(e,t,n){n&&(t.not=n),this.helpers[e]=t},Handlebars.registerPartial=function(e,t){this.partials[e]=t},Handlebars.registerHelper("helperMissing",function(e){if(arguments.length===2)return undefined;throw new Error("Could not find property '"+e+"'")});var toString=Object.prototype.toString,functionType="[object Function]";Handlebars.registerHelper("blockHelperMissing",function(e,t){var n=t.inverse||function(){},r=t.fn,i="",s=toString.call(e);s===functionType&&(e=e.call(this));if(e===!0)return r(this);if(e===!1||e==null)return n(this);if(s==="[object Array]"){if(e.length>0)for(var o=0,u=e.length;o<u;o++)i+=r(e[o]);else i=n(this);return i}return r(e)}),Handlebars.registerHelper("each",function(e,t){var n=t.fn,r=t.inverse,i="";if(e&&e.length>0)for(var s=0,o=e.length;s<o;s++)i+=n(e[s]);else i=r(this);return i}),Handlebars.registerHelper("if",function(e,t){var n=toString.call(e);return n===functionType&&(e=e.call(this)),!e||Handlebars.Utils.isEmpty(e)?t.inverse(this):t.fn(this)}),Handlebars.registerHelper("unless",function(e,t){var n=t.fn,r=t.inverse;return t.fn=r,t.inverse=n,Handlebars.helpers["if"].call(this,e,t)}),Handlebars.registerHelper("with",function(e,t){return t.fn(e)}),Handlebars.registerHelper("log",function(e){Handlebars.log(e)});var handlebars=function(){var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,statements:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,params:25,hash:26,param:27,STRING:28,INTEGER:29,BOOLEAN:30,hashSegments:31,hashSegment:32,ID:33,EQUALS:34,pathSegments:35,SEP:36,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"STRING",29:"INTEGER",30:"BOOLEAN",33:"ID",34:"EQUALS",36:"SEP"},productions_:[0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[25,2],[25,1],[27,1],[27,1],[27,1],[27,1],[26,1],[31,2],[31,1],[32,3],[32,3],[32,3],[32,3],[21,1],[35,3],[35,1]],performAction:function(t,n,r,i,s,o,u){var a=o.length-1;switch(s){case 1:return o[a-1];case 2:this.$=new i.ProgramNode(o[a-2],o[a]);break;case 3:this.$=new i.ProgramNode(o[a]);break;case 4:this.$=new i.ProgramNode([]);break;case 5:this.$=[o[a]];break;case 6:o[a-1].push(o[a]),this.$=o[a-1];break;case 7:this.$=new i.InverseNode(o[a-2],o[a-1],o[a]);break;case 8:this.$=new i.BlockNode(o[a-2],o[a-1],o[a]);break;case 9:this.$=o[a];break;case 10:this.$=o[a];break;case 11:this.$=new i.ContentNode(o[a]);break;case 12:this.$=new i.CommentNode(o[a]);break;case 13:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 14:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 15:this.$=o[a-1];break;case 16:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 17:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1],!0);break;case 18:this.$=new i.PartialNode(o[a-1]);break;case 19:this.$=new i.PartialNode(o[a-2],o[a-1]);break;case 20:break;case 21:this.$=[[o[a-2]].concat(o[a-1]),o[a]];break;case 22:this.$=[[o[a-1]].concat(o[a]),null];break;case 23:this.$=[[o[a-1]],o[a]];break;case 24:this.$=[[o[a]],null];break;case 25:o[a-1].push(o[a]),this.$=o[a-1];break;case 26:this.$=[o[a]];break;case 27:this.$=o[a];break;case 28:this.$=new i.StringNode(o[a]);break;case 29:this.$=new i.IntegerNode(o[a]);break;case 30:this.$=new i.BooleanNode(o[a]);break;case 31:this.$=new i.HashNode(o[a]);break;case 32:o[a-1].push(o[a]),this.$=o[a-1];break;case 33:this.$=[o[a]];break;case 34:this.$=[o[a-2],o[a]];break;case 35:this.$=[o[a-2],new i.StringNode(o[a])];break;case 36:this.$=[o[a-2],new i.IntegerNode(o[a])];break;case 37:this.$=[o[a-2],new i.BooleanNode(o[a])];break;case 38:this.$=new i.IdNode(o[a]);break;case 39:o[a-2].push(o[a]),this.$=o[a-2];break;case 40:this.$=[o[a]]}},table:[{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,33:[1,25],35:24},{17:26,21:23,33:[1,25],35:24},{17:27,21:23,33:[1,25],35:24},{17:28,21:23,33:[1,25],35:24},{21:29,33:[1,25],35:24},{1:[2,1]},{6:30,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,31],21:23,33:[1,25],35:24},{10:32,20:[1,33]},{10:34,20:[1,33]},{18:[1,35]},{18:[2,24],21:40,25:36,26:37,27:38,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,38],28:[2,38],29:[2,38],30:[2,38],33:[2,38],36:[1,46]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],36:[2,40]},{18:[1,47]},{18:[1,48]},{18:[1,49]},{18:[1,50],21:51,33:[1,25],35:24},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:52,33:[1,25],35:24},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:40,26:53,27:54,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,23]},{18:[2,26],28:[2,26],29:[2,26],30:[2,26],33:[2,26]},{18:[2,31],32:55,33:[1,56]},{18:[2,27],28:[2,27],29:[2,27],30:[2,27],33:[2,27]},{18:[2,28],28:[2,28],29:[2,28],30:[2,28],33:[2,28]},{18:[2,29],28:[2,29],29:[2,29],30:[2,29],33:[2,29]},{18:[2,30],28:[2,30],29:[2,30],30:[2,30],33:[2,30]},{18:[2,33],33:[2,33]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],34:[1,57],36:[2,40]},{33:[1,58]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,59]},{18:[1,60]},{18:[2,21]},{18:[2,25],28:[2,25],29:[2,25],30:[2,25],33:[2,25]},{18:[2,32],33:[2,32]},{34:[1,57]},{21:61,28:[1,62],29:[1,63],30:[1,64],33:[1,25],35:24},{18:[2,39],28:[2,39],29:[2,39],30:[2,39],33:[2,39],36:[2,39]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,34],33:[2,34]},{18:[2,35],33:[2,35]},{18:[2,36],33:[2,36]},{18:[2,37],33:[2,37]}],defaultActions:{16:[2,1],37:[2,23],53:[2,21]},parseError:function(t,n){throw new Error(t)},parse:function(t){function d(e){r.length=r.length-2*e,i.length=i.length-e,s.length=s.length-e}function v(){var e;return e=n.lexer.lex()||1,typeof e!="number"&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],s=[],o=this.table,u="",a=0,f=0,l=0,c=2,h=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var p=this.lexer.yylloc;s.push(p),typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var m,g,y,b,w,E,S={},x,T,N,C;for(;;){y=r[r.length-1],this.defaultActions[y]?b=this.defaultActions[y]:(m==null&&(m=v()),b=o[y]&&o[y][m]);if(typeof b=="undefined"||!b.length||!b[0])if(!l){C=[];for(x in o[y])this.terminals_[x]&&x>2&&C.push("'"+this.terminals_[x]+"'");var k="";this.lexer.showPosition?k="Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+C.join(", ")+", got '"+this.terminals_[m]+"'":k="Parse error on line "+(a+1)+": Unexpected "+(m==1?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[m]||m,line:this.lexer.yylineno,loc:p,expected:C})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+m);switch(b[0]){case 1:r.push(m),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(b[1]),m=null,g?(m=g,g=null):(f=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,p=this.lexer.yylloc,l>0&&l--);break;case 2:T=this.productions_[b[1]][1],S.$=i[i.length-T],S._$={first_line:s[s.length-(T||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(T||1)].first_column,last_column:s[s.length-1].last_column},E=this.performAction.call(S,u,f,a,this.yy,b[1],i,s);if(typeof E!="undefined")return E;T&&(r=r.slice(0,-1*T*2),i=i.slice(0,-1*T),s=s.slice(0,-1*T)),r.push(this.productions_[b[1]][0]),i.push(S.$),s.push(S._$),N=o[r[r.length-2]][r[r.length-1]],r.push(N);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(t,n){if(!this.yy.parseError)throw new Error(t);this.yy.parseError(t,n)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.match+=e,this.matched+=e;var t=e.match(/\n/);return t&&this.yylineno++,this._input=this._input.slice(1),e},unput:function(e){return this._input=e+this._input,this},more:function(){return this._more=!0,this},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=(new Array(e.length+1)).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r;this._more||(this.yytext="",this.match="");var i=this._currentRules();for(var s=0;s<i.length;s++){t=this._input.match(this.rules[i[s]]);if(t
){r=t[0].match(/\n.*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-1:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,i[s],this.conditionStack[this.conditionStack.length-1]);if(e)return e;return}}if(this._input==="")return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return typeof t!="undefined"?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return e.performAction=function(t,n,r,i){var s=i;switch(r){case 0:n.yytext.slice(-1)!=="\\"&&this.begin("mu"),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1),this.begin("emu"));if(n.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return 24;case 4:return 16;case 5:return 20;case 6:return 19;case 7:return 19;case 8:return 23;case 9:return 23;case 10:return n.yytext=n.yytext.substr(3,n.yyleng-5),this.popState(),15;case 11:return 22;case 12:return 34;case 13:return 33;case 14:return 33;case 15:return 36;case 16:break;case 17:return this.popState(),18;case 18:return this.popState(),18;case 19:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\"/g,'"'),28;case 20:return 30;case 21:return 30;case 22:return 29;case 23:return 33;case 24:return n.yytext=n.yytext.substr(1,n.yyleng-2),33;case 25:return"INVALID";case 26:return 5}},e.rules=[/^[^\x00]*?(?=(\{\{))/,/^[^\x00]+/,/^[^\x00]{2,}?(?=(\{\{))/,/^\{\{>/,/^\{\{#/,/^\{\{\//,/^\{\{\^/,/^\{\{\s*else\b/,/^\{\{\{/,/^\{\{&/,/^\{\{![\s\S]*?\}\}/,/^\{\{/,/^=/,/^\.(?=[} ])/,/^\.\./,/^[\/.]/,/^\s+/,/^\}\}\}/,/^\}\}/,/^"(\\["]|[^"])*"/,/^true(?=[}\s])/,/^false(?=[}\s])/,/^[0-9]+(?=[}\s])/,/^[a-zA-Z0-9_$-]+(?=[=}\s\/.])/,/^\[[^\]]*\]/,/^./,/^$/],e.conditions={mu:{rules:[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],inclusive:!1},emu:{rules:[2],inclusive:!1},INITIAL:{rules:[0,1,26],inclusive:!0}},e}();return e.lexer=t,e}();typeof require!="undefined"&&typeof exports!="undefined"&&(exports.parser=handlebars,exports.parse=function(){return handlebars.parse.apply(handlebars,arguments)},exports.main=function(t){if(!t[1])throw new Error("Usage: "+t[0]+" FILE");if(typeof process!="undefined")var n=require("fs").readFileSync(require("path").join(process.cwd(),t[1]),"utf8");else var r=require("file").path(require("file").cwd()),n=r.join(t[1]).read({charset:"utf-8"});return exports.parser.parse(n)},typeof module!="undefined"&&require.main===module&&exports.main(typeof process!="undefined"?process.argv.slice(1):require("system").args)),Handlebars.Parser=handlebars,Handlebars.parse=function(e){return Handlebars.Parser.yy=Handlebars.AST,Handlebars.Parser.parse(e)},Handlebars.print=function(e){return(new Handlebars.PrintVisitor).accept(e)},Handlebars.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){}},Handlebars.log=function(e,t){Handlebars.logger.log(e,t)},function(){Handlebars.AST={},Handlebars.AST.ProgramNode=function(e,t){this.type="program",this.statements=e,t&&(this.inverse=new Handlebars.AST.ProgramNode(t))},Handlebars.AST.MustacheNode=function(e,t,n){this.type="mustache",this.id=e[0],this.params=e.slice(1),this.hash=t,this.escaped=!n},Handlebars.AST.PartialNode=function(e,t){this.type="partial",this.id=e,this.context=t};var e=function(e,t){if(e.original!==t.original)throw new Handlebars.Exception(e.original+" doesn't match "+t.original)};Handlebars.AST.BlockNode=function(t,n,r){e(t.id,r),this.type="block",this.mustache=t,this.program=n},Handlebars.AST.InverseNode=function(t,n,r){e(t.id,r),this.type="inverse",this.mustache=t,this.program=n},Handlebars.AST.ContentNode=function(e){this.type="content",this.string=e},Handlebars.AST.HashNode=function(e){this.type="hash",this.pairs=e},Handlebars.AST.IdNode=function(e){this.type="ID",this.original=e.join(".");var t=[],n=0;for(var r=0,i=e.length;r<i;r++){var s=e[r];s===".."?n++:s==="."||s==="this"?this.isScoped=!0:t.push(s)}this.parts=t,this.string=t.join("."),this.depth=n,this.isSimple=t.length===1&&n===0},Handlebars.AST.StringNode=function(e){this.type="STRING",this.string=e},Handlebars.AST.IntegerNode=function(e){this.type="INTEGER",this.integer=e},Handlebars.AST.BooleanNode=function(e){this.type="BOOLEAN",this.bool=e},Handlebars.AST.CommentNode=function(e){this.type="comment",this.comment=e}}(),Handlebars.Exception=function(e){var t=Error.prototype.constructor.apply(this,arguments);for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);this.message=t.message},Handlebars.Exception.prototype=new Error,Handlebars.SafeString=function(e){this.string=e},Handlebars.SafeString.prototype.toString=function(){return this.string.toString()},function(){var e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},t=/&(?!\w+;)|[<>"'`]/g,n=/[&<>"'`]/,r=function(t){return e[t]||"&amp;"};Handlebars.Utils={escapeExpression:function(e){return e instanceof Handlebars.SafeString?e.toString():e==null||e===!1?"":n.test(e)?e.replace(t,r):e},isEmpty:function(e){return typeof e=="undefined"?!0:e===null?!0:e===!1?!0:Object.prototype.toString.call(e)==="[object Array]"&&e.length===0?!0:!1}}}(),Handlebars.Compiler=function(){},Handlebars.JavaScriptCompiler=function(){},function(e,t){e.OPCODE_MAP={appendContent:1,getContext:2,lookupWithHelpers:3,lookup:4,append:5,invokeMustache:6,appendEscaped:7,pushString:8,truthyOrFallback:9,functionOrFallback:10,invokeProgram:11,invokePartial:12,push:13,assignToHash:15,pushStringParam:16},e.MULTI_PARAM_OPCODES={appendContent:1,getContext:1,lookupWithHelpers:2,lookup:1,invokeMustache:3,pushString:1,truthyOrFallback:1,functionOrFallback:1,invokeProgram:3,invokePartial:1,push:1,assignToHash:1,pushStringParam:1},e.DISASSEMBLE_MAP={};for(var n in e.OPCODE_MAP){var r=e.OPCODE_MAP[n];e.DISASSEMBLE_MAP[r]=n}e.multiParamSize=function(t){return e.MULTI_PARAM_OPCODES[e.DISASSEMBLE_MAP[t]]},e.prototype={compiler:e,disassemble:function(){var t=this.opcodes,n,r,i=[],s,o,u;for(var a=0,f=t.length;a<f;a++){n=t[a];if(n==="DECLARE")o=t[++a],u=t[++a],i.push("DECLARE "+o+" = "+u);else{s=e.DISASSEMBLE_MAP[n];var l=e.multiParamSize(n),c=[];for(var h=0;h<l;h++)r=t[++a],typeof r=="string"&&(r='"'+r.replace("\n","\\n")+'"'),c.push(r);s=s+" "+c.join(" "),i.push(s)}}return i.join("\n")},guid:0,compile:function(e,t){this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(n)for(var r in n)this.options.knownHelpers[r]=n[r];return this.program(e)},accept:function(e){return this[e.type](e)},program:function(e){var t=e.statements,n;this.opcodes=[];for(var r=0,i=t.length;r<i;r++)n=t[r],this[n.type](n);return this.isSimple=i===1,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++;this.usePartial=this.usePartial||t.usePartial,this.children[n]=t;for(var r=0,i=t.depths.list.length;r<i;r++){depth=t.depths.list[r];if(depth<2)continue;this.addDepth(depth-1)}return n},block:function(e){var t=e.mustache,n,r,i,s,o=this.setupStackForMustache(t),u=this.compileProgram(e.program);e.program.inverse&&(s=this.compileProgram(e.program.inverse),this.declare("inverse",s)),this.opcode("invokeProgram",u,o.length,!!t.hash),this.declare("inverse",null),this.opcode("append")},inverse:function(e){var t=this.setupStackForMustache(e.mustache),n=this.compileProgram(e.program);this.declare("inverse",n),this.opcode("invokeProgram",null,t.length,!!e.mustache.hash),this.declare("inverse",null),this.opcode("append")},hash:function(e){var t=e.pairs,n,r;this.opcode("push","{}");for(var i=0,s=t.length;i<s;i++)n=t[i],r=n[1],this.accept(r),this.opcode("assignToHash",n[0])},partial:function(e){var t=e.id;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.original),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){var t=this.setupStackForMustache(e);this.opcode("invokeMustache",t.length,e.id.original,!!e.hash),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("lookupWithHelpers",e.parts[0]||null,e.isScoped||!1);for(var t=1,n=e.parts.length;t<n;t++)this.opcode("lookup",e.parts[t])},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("push",e.integer)},BOOLEAN:function(e){this.opcode("push",e.bool)},comment:function(){},pushParams:function(e){var t=e.length,n;while(t--)n=e[t],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.string)):this[n.type](n)},opcode:function(t,n,r,i){this.opcodes.push(e.OPCODE_MAP[t]),n!==undefined&&this.opcodes.push(n),r!==undefined&&this.opcodes.push(r),i!==undefined&&this.opcodes.push(i)},declare:function(e,t){this.opcodes.push("DECLARE"),this.opcodes.push(e),this.opcodes.push(t)},addDepth:function(e){if(e===0)return;this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e))},setupStackForMustache:function(e){var t=e.params;return this.pushParams(t),e.hash&&this.hash(e.hash),this.ID(e.id),t}},t.prototype={nameLookup:function(e,n,r){return/^[0-9]+$/.test(n)?e+"["+n+"]":t.isValidJavaScriptVariableName(n)?e+"."+n:e+"['"+n+"']"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":"buffer += "+e+";"},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,r){this.environment=e,this.options=t||{},this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],aliases:{self:"this"},registers:{list:[]}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.compileChildren(e,t);var i=e.opcodes,s;this.i=0;for(u=i.length;this.i<u;this.i++)s=this.nextOpcode(0),s[0]==="DECLARE"?(this.i=this.i+2,this[s[1]]=s[2]):(this.i=this.i+s[1].length,this[s[0]].apply(this,s[1]));return this.createFunctionContext(r)},nextOpcode:function(t){var n=this.environment.opcodes,r=n[this.i+t],i,s,o,u;if(r==="DECLARE")return i=n[this.i+1],s=n[this.i+2],["DECLARE",i,s];i=e.DISASSEMBLE_MAP[r],o=e.multiParamSize(r),u=[];for(var a=0;a<o;a++)u.push(n[this.i+a+1+t]);return[i,u]},eat:function(e){this.i=this.i+e.length},preamble:function(){var e=[];this.useRegister("foundHelper");if(!this.isChild){var t=this.namespace,n="helpers = helpers || "+t+".helpers;";this.environment.usePartial&&(n=n+" partials = partials || "+t+".partials;"),e.push(n)}else e.push("");this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(e){var t=this.stackVars;this.isChild||(t=t.concat(this.context.registers.list)),t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", "));if(!this.isChild){var n=[];for(var r in this.context.aliases)this.source[1]=this.source[1]+", "+r+"="+this.context.aliases[r]}this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var s=0,o=this.environment.depths.list.length;s<o;s++)i.push("depth"+this.environment.depths.list[s]);if(e)return i.push(this.source.join("\n  ")),Function.apply(this,i);var u="function "+(this.name||"")+"("+i.join(",")+") {\n  "+this.source.join("\n  ")+"}";return Handlebars.log(Handlebars.logger.DEBUG,u+"\n\n"),u},appendContent:function(e){this.source.push(this.appendToBuffer(this.quotedString(e)))},append:function(){var e=this.popStack();this.source.push("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){var e=this.nextOpcode(1),t="";this.context.aliases.escapeExpression="this.escapeExpression",e[0]==="appendContent"&&(t=" + "+this.quotedString(e[1][0]),this.eat(e)),this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"+t))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupWithHelpers:function(e,t){if(e){var n=this.nextStack();this.usingKnownHelper=!1;var r;!t&&this.options.knownHelpers[e]?(r=n+" = "+this.nameLookup("helpers",e,"helper"),this.usingKnownHelper=!0):t||this.options.knownHelpersOnly?r=n+" = "+this.nameLookup("depth"+this.lastContext,e,"context"):(this.register("foundHelper",this.nameLookup("helpers",e,"helper")),r=n+" = foundHelper || "+this.nameLookup("depth"+this.lastContext,e,"context")),r+=";",this.source.push(r)}else this.pushStack("depth"+this.lastContext)},lookup:function(e){var t=this.topStack();this.source.push(t+" = ("+t+" === null || "+t+" === undefined || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")+");")},pushStringParam:function(e){this.pushStack("depth"+this.lastContext),this.pushString(e)},pushString:function(e){this.pushStack(this.quotedString(e))},push:function(e){this.pushStack(e)},invokeMustache:function(e,t,n){this.populateParams(e,this.quotedString(t),"{}",null,n,function(e,t,n){this.usingKnownHelper||(this.context.aliases.helperMissing="helpers.helperMissing",this.context.aliases.undef="void 0",this.source.push("else if("+n+"=== undef) { "+e+" = helperMissing.call("+t+"); }"),e!==n&&this.source.push("else { "+e+" = "+n+"; }"))})},invokeProgram:function(e,t,n){var r=this.programExpression(this.inverse),i=this.programExpression(e);this.populateParams(t,null,i,r,n,function(e,t,n){this.usingKnownHelper||(this.context.aliases.blockHelperMissing="helpers.blockHelperMissing",this.source.push("else { "+e+" = blockHelperMissing.call("+t+"); }"))})},populateParams:function(e,t,n,r,i,s){var o=i||this.options.stringParams||r||this.options.data,u=this.popStack(),a,f=[],l,c,h;o?(this.register("tmp1",n),h="tmp1"):h="{ hash: {} }";if(o){var p=i?this.popStack():"{}";this.source.push("tmp1.hash = "+p+";")}this.options.stringParams&&this.source.push("tmp1.contexts = [];");for(var d=0;d<e;d++)l=this.popStack(),f.push(l),this.options.stringParams&&this.source.push("tmp1.contexts.push("+this.popStack()+");");r&&(this.source.push("tmp1.fn = tmp1;"),this.source.push("tmp1.inverse = "+r+";")),this.options.data&&this.source.push("tmp1.data = data;"),f.push(h),this.populateCall(f,u,t||u,s,n!=="{}")},populateCall:function(e,t,n,r,i){var s=["depth0"].concat(e).join(", "),o=["depth0"].concat(n).concat(e).join(", "),u=this.nextStack();if(this.usingKnownHelper)this.source.push(u+" = "+t+".call("+s+");");else{this.context.aliases.functionType='"function"';var a=i?"foundHelper && ":"";this.source.push("if("+a+"typeof "+t+" === functionType) { "+u+" = "+t+".call("+s+"); }")}r.call(this,u,o,t),this.usingKnownHelper=!1},invokePartial:function(e){params=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"],this.options.data&&params.push("data"),this.pushStack("self.invokePartial("+params.join(", ")+");")},assignToHash:function(e){var t=this.popStack(),n=this.topStack();this.source.push(n+"['"+e+"'] = "+t+";")},compiler:t,compileChildren:function(e,t){var n=e.children,r,i;for(var s=0,o=n.length;s<o;s++){r=n[s],i=new this.compiler,this.context.programs.push("");var u=this.context.programs.length;r.index=u,r.name="program"+u,this.context.programs[u]=i.compile(r,t,this.context)}},programExpression:function(e){if(e==null)return"self.noop";var t=this.environment.children[e],n=t.depths.list,r=[t.index,t.name,"data"];for(var i=0,s=n.length;i<s;i++)depth=n[i],depth===1?r.push("depth0"):r.push("depth"+(depth-1));return n.length===0?"self.program("+r.join(", ")+")":(r.shift(),"self.programWithDepth("+r.join(", ")+")")},register:function(e,t){this.useRegister(e),this.source.push(e+" = "+t+";")},useRegister:function(e){this.context.registers[e]||(this.context.registers[e]=!0,this.context.registers.list.push(e))},pushStack:function(e){return this.source.push(this.nextStack()+" = "+e+";"),"stack"+this.stackSlot},nextStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),"stack"+this.stackSlot},popStack:function(){return"stack"+this.stackSlot--},topStack:function(){return"stack"+this.stackSlot},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'}};var i="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),s=t.RESERVED_WORDS={};for(var o=0,u=i.length;o<u;o++)s[i[o]]=!0;t.isValidJavaScriptVariableName=function(e){return!t.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1}}(Handlebars.Compiler,Handlebars.JavaScriptCompiler),Handlebars.precompile=function(e,t){t=t||{};var n=Handlebars.parse(e),r=(new Handlebars.Compiler).compile(n,t);return(new Handlebars.JavaScriptCompiler).compile(r,t)},Handlebars.compile=function(e,t){function r(){var n=Handlebars.parse(e),r=(new Handlebars.Compiler).compile(n,t),i=(new Handlebars.JavaScriptCompiler).compile(r,t,undefined,!0);return Handlebars.template(i)}t=t||{};var n;return function(e,t){return n||(n=r()),n.call(this,e,t)}},Handlebars.VM={template:function(e){var t={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(e,t,n){var r=this.programs[e];return n?Handlebars.VM.program(t,n):r?r:(r=this.programs[e]=Handlebars.VM.program(t),r)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};return function(n,r){return r=r||{},e.call(t,Handlebars,n,r.helpers,r.partials,r.data)}},programWithDepth:function(e,t,n){var r=Array.prototype.slice.call(arguments,2);return function(n,i){return i=i||{},e.apply(this,[n,i.data||t].concat(r))}},program:function(e,t){return function(n,r){return r=r||{},e(n,r.data||t)}},noop:function(){return""},invokePartial:function(e,t,n,r,i,s){options={helpers:r,partials:i,data:s};if(e===undefined)throw new Handlebars.Exception("The partial "+t+" could not be found");if(e instanceof Function)return e(n,options);if(!Handlebars.compile)throw new Handlebars.Exception("The partial "+t+" could not be compiled when running in runtime-only mode");return i[t]=Handlebars.compile(e),i[t](n,options)}},Handlebars.template=Handlebars.VM.template,function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="1.0.0";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;typeof t=="object"&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=u.uniqueId("l"));return i[s]=t,typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},u.extend(this,u.pick(t,d)),t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t;if(r&&(!n||!n.wait)&&!this.set(r,n))return!1;n=u.extend({validate:!0},n);if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},j(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;j(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||B();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t||{},{validationError:n})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];u.each(v,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var m=o.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};u.extend(m.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.defaults(t||{},y))},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},set:function(e,t){t=u.defaults(t||{},g),t.parse&&(e=this.parse(e,t)),u.isArray(e)||(e=e?[e]:[]);var n,i,o,a,f,l,c=t.at,h=this.comparator&&c==null&&t.sort!==!1,p=u.isString(this.comparator)?this.comparator:null,d=[],v=[],m={};for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(e[n],t)))continue;(f=this.get(o))?(t.remove&&(m[f.cid]=!0),t.merge&&(f.set(o.attributes,t),h&&!l&&f.hasChanged(p)&&(l=!0))):t.add&&(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o))}if(t.remove){for(n=0,i=this.length;n<i;++n)m[(o=this.models[n]).cid]||v.push(o);v.length&&this.remove(v,t)}d.length&&(h&&(l=!0),this.length+=d.length,c!=null?s.apply(this.models,[c,0].concat(d)):r.apply(this.models,d)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=d.length;n<i;n++)(o=d[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(b,function(e){m.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var w=["groupBy","countBy","sortBy"];u.each(w,function(e){m.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var E=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];u.extend(E.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(S),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,x)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||B()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply
(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var H=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=m.extend=N.extend=E.extend=O.extend=H;var B=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this);if($("#cse").length>0){var script=document.createElement("script");script.src="https://www.google.com/jsapi?callback=doSearch",script.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(script)}$(".related-posts a").live("click",function(e){e.preventDefault();try{var t="Recommendation Click";$(e.currentTarget).parent().hasClass("sponsored")&&(t="Sponsored Recommendation Click"),_gaq.push(["AllSites._trackEvent","Reader Action",t,$(e.currentTarget).data("post-title")]),setTimeout('document.location = "'+$(e.currentTarget).attr("href")+'"',100)}catch(n){}});var $comment_counts=$(".comment-count");if($comment_counts.length>0){var type_ids={};$comment_counts.each(function(){var e=$(this),t=e.data("type");t?(type_ids[t]=type_ids[t]||[],type_ids[t].push(e.data("id"))):e.html("").addClass("COMMENT-COUNT-ERROR")});for(var type in type_ids)(function(e){$.ajax({url:AT.config.proxy+"/comments/counts",dataType:"json",data:{ids:type_ids[e],type:e},success:function(t){for(var n in t)$comment_counts.filter('[data-id="'+n+'"][data-type="'+e+'"]').html(t[n])}})})(type)}(function(){(function(){var e,t,n,r;return this.AT||(this.AT={}),(e=this.AT).Models||(e.Models={}),(t=this.AT).Collections||(t.Collections={}),(n=this.AT).Views||(n.Views={}),(r=this.AT).Globals||(r.Globals={})}).call(window)}).call(this),function(){Handlebars.registerHelper("urlencode",function(e){return encodeURIComponent(e)}),Handlebars.registerHelper("each_with_index",function(e,t){var n,r,i,s,o;n="";for(s=0,o=e.length;s<o;s++)r=e[s],i=r,i.index=s,n+=t(i);return n}),Handlebars.registerHelper("compare",function(e,t,n,r){var i,s;if(arguments.length<3)throw new Error("Handlerbars Helper 'compare' needs 2 parameters");i={"==":function(e,t){return e===t},"===":function(e,t){return e===t},"!=":function(e,t){return e!==t},"<":function(e,t){return e<t},">":function(e,t){return e>t},"<=":function(e,t){return e<=t},">=":function(e,t){return e>=t},"typeof":function(e,t){return typeof e===t}};if(!i[t])throw new Error("Handlerbars Helper 'compare' doesn't know the operator "+t);return s=i[t](e,n),s?r.fn(this):r.inverse(this)}),Handlebars.registerHelper("pixtruderImgUrl",function(e){var t;if(_.isUndefined(e.hash.id))throw new Error("Handlebars helper `pixtruderImgUrl`: Missing id parameter.");return t=""+e.hash.id,e.hash.w&&(t+="._w."+e.hash.w),e.hash.h&&(t+="._h."+e.hash.h),e.hash.s&&(t+="._s."+e.hash.s),e.hash.hide_extension||(t+=".jpg"),"http://p-ec2.staticat.com/"+t}),Handlebars.registerHelper("pixtruderImgTag",function(e){var t,n;return e.hash["class"]?t="class='"+e.hash["class"]+"'":t="",n="<img src='"+Handlebars.helpers.pixtruderImgUrl(e)+"' "+t+" />",new Handlebars.SafeString(n)}),Handlebars.registerHelper("global",function(e){var t,n,r,i,s;t=window,r=e.split(".");for(i=0,s=r.length;i<s;i++)n=r[i],t=t[n];return t})}.call(this),function(){this.JST||(this.JST={}),this.JST["at-app/templates/galleries/popup_gallery"]=function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["at-app/templates/galleries/popup_gallery"]=Handlebars.template(function(e,t,n,r,i){function m(e,t){return"on"}function g(e,t){var i="",s;i+='\n          <span class="media right" style="margin-top: 8px;">\n            ',a=n.post_data,s=a||e.post_data,s=l.invokePartial(r["_at-app_templates_sponsors_chip_it_button"],"_at-app_templates_sponsors_chip_it_button",s,n,r);if(s||s===0)i+=s;return i+="\n          </span>\n        ",i}function y(e,t){var r="",i;return r+='\n            <div class="swiper-slide">\n              <a href="#" class="popup-gallery-thumbnail" data-go-to-slide="',a=n.index,i=a||e.index,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"index",{hash:{}})),r+=d(i)+'" data-index="',a=n.index,i=a||e.index,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"index",{hash:{}})),r+=d(i)+'"></a>\n            </div>\n          ',r}function b(e,t){var i="",s;i+="\n        ",a=n.post_data,s=a||e.post_data,s=l.invokePartial(r["_at-app_templates_sponsors_chip_it_button"],"_at-app_templates_sponsors_chip_it_button",s,n,r);if(s||s===0)i+=s;return i+="\n      ",i}function w(e,t){var i="",s;i+='\n        <div class="popup-gallery-advertisement">\n          ',a=n.options,s=a||e.options,s=l.invokePartial(r["_at-app_templates_globals_dfp_ad"],"_at-app_templates_globals_dfp_ad",s,n,r);if(s||s===0)i+=s;return i+="\n        </div>\n      ",i}function E(e,t){var r="",i;return r+='\n        <div class="popup-gallery-slide swiper-slide" data-index="',a=n.index,i=a||e.index,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"index",{hash:{}})),r+=d(i)+'">\n          <div class="lazy-image-slide"><div class="lazy-image-slide-wrapper"></div></div>\n        </div>\n      ',r}function S(e,t){var r="",i;return r+='\n          <a href="#" data-index="',a=n.index,i=a||e.index,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"index",{hash:{}})),r+=d(i)+'" data-go-to-slide="',a=n.index,i=a||e.index,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"index",{hash:{}})),r+=d(i)+'"></a>\n        ',r}n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression,v=n.blockHelperMissing;s+='<div class="popup-gallery-container">\n  <div class="popup-gallery-info">\n    <div class="header media-box">\n      <div class="media right popup-gallery-controls">\n        <a class="toggle-captions muted-link ',a=n.options,o=a||t.options,o=o===null||o===undefined||o===!1?o:o.show_captions,u=n["if"],f=l.program(1,m,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+='" href="#" data-layout="small"><i class="icon-quote-right"></i></a>\n        <a class="toggle-thumbnail-grid muted-link" href="#" data-layout="small"><i class="icon-th"></i></a>\n        <a class="fullscreen muted-link" href="#" data-layout="large"><i class="icon-resize-full"></i></a>\n        <a class="close muted-link" href="#"><i class="icon-remove"></i></a>\n      </div>\n      <span data-layout="small">\n        <span class="popup-gallery-social-buttons media right"><span class="pinterest"></span></span>\n        ',a=n.options,o=a||t.options,o=o===null||o===undefined||o===!1?o:o.show_chip_it_button,u=n["if"],f=l.program(3,g,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+='\n\n\n      </span>\n      \n      <span class="media-body">\n        <span class="mini-logo" data-layout="small">',o="AT.CurrentSite.name",a=n.global,u=a||t.global,typeof u===c?o=u.call(t,o,{hash:{}}):u===p?o=h.call(t,"global",o,{hash:{}}):o=u,s+=d(o)+'</span>\n        <span class="gallery-title" data-layout="large">',a=n.options,o=a||t.options,o=o===null||o===undefined||o===!1?o:o.title,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"options.title",{hash:{}})),s+=d(o)+'</span>\n      </span>\n    </div>\n    \n    <div class="popup-gallery-thumbnail-navigation" data-layout="large">\n      <a class="scroll-thumbnails prev muted-link" href="#"><i class="icon-angle-left"></i></a>\n      <a class="scroll-thumbnails next muted-link" href="#"><i class="icon-angle-right"></i></a>\n      <div class="scrollable-thumbnails swiper-container">\n        <div class="swiper-wrapper">\n          ',a=n.gallery,o=a||t.gallery,o=o===null||o===undefined||o===!1?o:o.images,a=n.each_with_index,u=a||t.each_with_index,f=l.program(5,y,i),f.hash={},f.fn=f,f.inverse=l.noop,a&&typeof u===c?o=u.call(t,o,f):o=v.call(t,u,o,f);if(o||o===0)s+=o;s+='\n        </div>\n      </div>\n      <a href="#" class="toggle-thumbnail-grid muted-link"><i class="icon-th"></i> <span>Show all thumbnails</span></a>\n      ',a=n.options,o=a||t.options,o=o===null||o===undefined||o===!1?o:o.show_chip_it_button,u=n["if"],f=l.program(7,b,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+='\n      <span class="popup-gallery-social-buttons"><span class="pinterest"></span></span>\n    </div>\n    <div class="popup-gallery-scrollable-info" data-layout="large">\n      <div class="wrap">\n        <div class="popup-gallery-caption accent-color-links"></div>\n    \n        <!-- <small class="popup-gallery-photo-credit muted" data-layout="large">\n          photo by Matt Wondra\n          </small> -->\n      </div>\n    </div>\n    <div class="footer" data-layout="large">\n      ',a=n.options,o=a||t.options,o=o===null||o===undefined||o===!1?o:o.show_ad,u=n["if"],f=l.program(9,w,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+='\n      <a class="mini-logo">',o="AT.CurrentSite.name",a=n.global,u=a||t.global,typeof u===c?o=u.call(t,o,{hash:{}}):u===p?o=h.call(t,"global",o,{hash:{}}):o=u,s+=d(o)+'</a>\n    </div>\n  </div>\n  \n  \n  <div class="popup-gallery-stage swiper-container" data-go-to-slide="NEXT">\n    <div class="swiper-wrapper">\n      ',a=n.gallery,o=a||t.gallery,o=o===null||o===undefined||o===!1?o:o.images,a=n.each_with_index,u=a||t.each_with_index,f=l.program(11,E,i),f.hash={},f.fn=f,f.inverse=l.noop,a&&typeof u===c?o=u.call(t,o,f):o=v.call(t,u,o,f);if(o||o===0)s+=o;s+=' \n    </div>\n    <a class="scroll-slide prev" data-go-to-slide="PREV" href=""><i class="icon-angle-left"></i></a>\n    <a class="scroll-slide next" data-go-to-slide="NEXT" href=""><i class="icon-angle-right"></i></a>\n    <div class="popup-gallery-floating-caption accent-color-links" data-layout="small"></div>\n    <div class="popup-gallery-thumbnail-grid">\n      <div class="pad">\n        ',a=n.gallery,o=a||t.gallery,o=o===null||o===undefined||o===!1?o:o.images,a=n.each_with_index,u=a||t.each_with_index,f=l.program(13,S,i),f.hash={},f.fn=f,f.inverse=l.noop,a&&typeof u===c?o=u.call(t,o,f):o=v.call(t,u,o,f);if(o||o===0)s+=o;return s+="\n      </div>\n    </div>\n    \n  </div>\n</div>\n",s}),this.HandlebarsTemplates["at-app/templates/galleries/popup_gallery"]}.call(this)}.call(this),function(){this.JST||(this.JST={}),this.JST["at-app/templates/galleries/popup_gallery_link"]=function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["at-app/templates/galleries/popup_gallery_link"]=Handlebars.template(function(e,t,n,r,i){function m(e,t,r){var i="",s,o,u,h;i+="\n      ",s="3",o="<",a=n.index,u=a||e.index,a=n.compare,h=a||e.compare,f=l.programWithDepth(g,t,r),f.hash={},f.fn=f,f.inverse=l.noop,a&&typeof h===c?s=h.call(e,u,o,s,f):s=v.call(e,h,u,o,s,f);if(s||s===0)i+=s;return i+="\n    ",i}function g(e,t,r){var i="",s,o;return i+='\n        <a href="#gallery/',a=n.gallery,s=a||r.gallery,s=s===null||s===undefined||s===!1?s:s.id,typeof s===c?s=s.call(e,{hash:{}}):s===p&&(s=h.call(e,"......gallery.id",{hash:{}})),i+=d(s)+"/",a=n.index,s=a||e.index,typeof s===c?s=s.call(e,{hash:{}}):s===p&&(s=h.call(e,"index",{hash:{}})),i+=d(s)+'" class="thumbnail open-popup-gallery">',s={},a=n.pixtruder_id,o=a||e.pixtruder_id,s.id=o,o="90",s.w=o,o="90",s.h=o,o="centercrop_",s.s=o,a=n.pixtruderImgTag,o=a||e.pixtruderImgTag,f={},f.hash=s,typeof o===c?s=o.call(e,f):o===p?s=h.call(e,"pixtruderImgTag",f):s=o,i+=d(s)+"</a>\n      ",i}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression,v=n.blockHelperMissing;s+='<div class="thumbnail-grid grid-compact">\n  <div class="row">\n    ',a=n.gallery,o=a||t.gallery,o=o===null||o===undefined||o===!1?o:o.images,a=n.each_with_index,u=a||t.each_with_index,f=l.programWithDepth(m,i,t),f.hash={},f.fn=f,f.inverse=l.noop,a&&typeof u===c?o=u.call(t,o,f):o=v.call(t,u,o,f);if(o||o===0)s+=o;return s+='\n  </div>\n</div>\n<a class="btn btn-block btn-more-link open-popup-gallery" href="#gallery/',a=n.gallery,o=a||t.gallery,o=o===null||o===undefined||o===!1?o:o.id,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"gallery.id",{hash:{}})),s+=d(o)+'">Open ',a=n.gallery,o=a||t.gallery,o=o===null||o===undefined||o===!1?o:o.type,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"gallery.type",{hash:{}})),s+=d(o)+"</a>\n",s}),this.HandlebarsTemplates["at-app/templates/galleries/popup_gallery_link"]}.call(this)}.call(this),function(){this.JST||(this.JST={}),this.JST["at-app/templates/globals/_dfp_ad"]=function(){Handlebars.registerPartial("_at-app_templates_globals_dfp_ad",Handlebars.template(function(e,t,n,r,i){function v(e,t){var r="",i;return r+='\n  <div id="div-gpt-ad-1320766135777-',a=n.ad_slot,i=a||e.ad_slot,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"ad_slot",{hash:{}})),r+=d(i)+'" class="ad"></div>\n',r}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;a=n.ad_slot,o=a||t.ad_slot,u=n["if"],f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;return s+="\n",s}))}.call(this)}.call(this),function(){this.JST||(this.JST={}),this.JST["at-app/templates/print_friendly_recipe"]=function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["at-app/templates/print_friendly_recipe"]=Handlebars.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a=this,f="function",l=n.helperMissing,c=void 0,h=this.escapeExpression;s+="<!doctype html>\n<html class='",u=n["class"],o=u||t["class"],typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"class",{hash:{}})),s+=h(o)+"'>\n  <head>\n    <link rel='stylesheet' type='text/css' media='all' href='",u=n.stylesheet,o=u||t.stylesheet,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"stylesheet",{hash:{}})),s+=h(o)+"' />\n  </head>\n  <body class='thekitchn'>\n    <div id='main'>\n      <div class='article'>\n        <div class='hgroup'><h1>",u=n.title,o=u||t.title,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"title",{hash:{}}));if(o||o===0)s+=o;s+="</h1></div>\n        <div id='print-recipe'><button onclick='window.print();'>Print this recipe</button></div><style media='screen'>#print-recipe {display: block; }</style>\n        <div class='content'>",u=n.content,o=u||t.content,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"content",{hash:{}}));if(o||o===0)s+=o;s+="</div>\n        <div class='author-info'>",u=n.author_info,o=u||t.author_info,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"author_info",{hash:{}}));if(o||o===0)s+=o;return s+="</div>\n      </div>\n    </div>\n  </body>\n</html>\n",s}),this.HandlebarsTemplates["at-app/templates/print_friendly_recipe"]}.call(this)}.call(this),function(){this.JST||(this.JST={}),this.JST["at-app/templates/print_recipe_button"]=function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["at-app/templates/print_recipe_button"]=Handlebars.template(function(e,t,n,r,i){function c(e,t){return'\n    <a href="#recipe" style="margin-left: 7px;">\n      <small>Jump to the recipe</small>\n    </a>\n  '}n=n||e.helpers;var s="",o,u,a,f,l=this;s+="<p>\n  <button>Printer-friendly recipe</button>\n  ",a=n.show_jump_link,o=a||t.show_jump_link,u=n["if"],f=l.program(1,c,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;return s+="\n</p>\n",s}),this.HandlebarsTemplates["at-app/templates/print_recipe_button"]}.call(this)}.call(this),function(){this.JST||(this.JST={}),this.JST["at-app/templates/social/pin_it_button"]=function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["at-app/templates/social/pin_it_button"]=Handlebars.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a,f=this,l="function",c=n.helperMissing,h=void 0,p=this.escapeExpression;return s+='<a href="//pinterest.com/pin/create/button/?url=',a=n.url,o=a||t.url,a=n.urlencode,u=a||t.urlencode,typeof u===l?o=u.call(t,o,{hash:{}}):u===h?o=c.call(t,"urlencode",o,{hash:{}}):o=u,s+=p(o)+"&media=",a=n.image_url,o=a||t.image_url,a=n.urlencode,u=a||t.urlencode,typeof u===l?o=u.call(t,o,{hash:{}}):u===h?o=c.call(t,"urlencode",o,{hash:{}}):o=u,s+=p(o)+"&description=",a=n.description,o=a||t.description,a=n.urlencode,u=a||t.urlencode,typeof u===l?o=u.call(t,o,{hash:{}}):u===h?o=c.call(t,"urlencode",o,{hash:{}}):o=u,s+=p(o)+'" data-pin-do="buttonPin" data-pin-config="beside">\n  <img src="//assets.pinterest.com/images/pidgets/pin_it_button.png" />\n</a>\n',s}),this.HandlebarsTemplates["at-app/templates/social/pin_it_button"]}.call(this)}.call(this),function(){this.JST||(this.JST={}),this.JST["at-app/templates/sponsors/_chip_it_button"]=function(){Handlebars.registerPartial("_at-app_templates_sponsors_chip_it_button",Handlebars.template(function(e,t,n,r,i){function v(e,t){var r="",i;return r+=", ",a=n.id,i=a||e.id,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"id",{hash:{}})),r+=d(i),r}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<span class=\'sw-chip-btn\' title=\'Chip It!\' onclick=\'_gaq.push(["_trackEvent", "Sponsors", "Chip It Button", "Popup Gallery"',a=n.id,o=a||t.id,u=n["if"],f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;return s+=']); (function(){if(!window.swActive){window.swActive=true;window.swRoot="http://letschipit.com:80/";window.swChipRoot="http://chips.letschipit.com/";window.swfc="http://chipcards.letschipit.com/";var a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("charset","UTF-8");a.setAttribute("src","http://letschipit.com:80/bookmarklet/src.js?r="+Math.random()*99999999);document.body.appendChild(a)}})();\' style="float: left; margin-right: 4px;"></span>\n',s}))}.call(this)}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};AT.Models.Gallery=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(Backbone.Model)}.call(this),function(){AT.Models.PixtruderImage=Backbone.Model.extend({get_image_dimensions:function(e){var t,n;e||(e={}),n=this.get("width"),t=this.get("height");switch(e.s){case void 0:!0;break;case"centercrop_":if(!e.w||!e.h)throw new Error("AT.Models.PixtruderImage.get_image_options(): Malformed image options: centercrop_ requires both w and h parameters");n=e.w,t=e.h;break;case"fit":e.h>t&&e.w>n?!0:e.h&&e.w?e.w/n<e.h/t?(t=e.w/n*t,n=e.w):(n=e.h/t*n,t=e.h):e.h?t=e.h:e.w&&(n=e.w);break;default:throw new Error("AT.Models.PixtruderImage.get_image_options(): Malformed image options: unrecognized strategy '"+e.s+"'")}return{width:n,height:t}}})}.call(this),function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}},n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};(e=AT.Views).Galleries||(e.Galleries={}),AT.Views.Galleries.InlineGallery=function(e){function n(){return this.afterSlideChange=t(this.afterSlideChange,this),this.beforeSlideChange=t(this.beforeSlideChange,this),this.handleKeydown=t(this.handleKeydown,this),this.handleArrowClick=t(this.handleArrowClick,this),this.handleThumbnailClick=t(this.handleThumbnailClick,this),this.handleImageClick=t(this.handleImageClick,this),n.__super__.constructor.apply(this,arguments)}return r(n,e),n.prototype.spinner_options={lines:12,width:4,length:12,trail:100,radius:12,color:"#fff",shadow:!0,speed:1.6},n.prototype.events={"click .inline-gallery-image":"handleImageClick","click .inline-gallery-thumbnail":"handleThumbnailClick","click .next-image, .prev-image":"handleArrowClick"},n.prototype.initialize=function(e){return e.el||alert("ERROR: InlineGallery requires el parameter."),this.spinner=new Spinner(this.spinner_options)},n.prototype.cacheDomElements=function(){return this.$image=this.$el.find(".inline-gallery-image img"),this.$thumbnails=this.$el.find(".inline-gallery-thumbnail"),this.$caption=this.$el.find(".inline-gallery-caption")},n.prototype.setBindings=function(){return $(document).on("keydown.InlineGallery",this.handleKeydown),this.$image.on("load.InlineGallery",this.afterSlideChange)},n.prototype.unsetBindings=function(){return $(document).off("keydown.InlineGallery"),this.$image.off("load.InlineGallery")},n.prototype.handleImageClick=function(e){return this.changeSlide("NEXT"),!1},n.prototype.handleThumbnailClick=function(e){return this.changeSlide($(e.currentTarget)),!1},n.prototype.handleArrowClick=function(e){return $(e.currentTarget).hasClass("next-image")?this.changeSlide("NEXT"):this.changeSlide("PREV"),!1},n.prototype.handleKeydown=function(e){e.which===AT.Keycodes.LEFT_ARROW&&this.changeSlide("PREV");if(e.which===AT.Keycodes.RIGHT_ARROW)return this.changeSlide("NEXT")},n.prototype.beforeSlideChange=function(){var e=this;return this.$el.addClass("loading"),this.spinner_timeout=setTimeout(function(){return e.spinner.spin(e.$image.closest(".inline-gallery-image")[0])},125)},n.prototype.afterSlideChange=function(){return clearTimeout(this.spinner_timeout),this.$el.removeClass("loading"),this.spinner.stop()},n.prototype.changeSlide=function(e){e==="NEXT"?(e=this.$thumbnails.filter(".current").next(),e.length===0&&(e=this.$thumbnails.first())):e==="PREV"&&(e=this.$thumbnails.filter(".current").prev(),e.length===0&&(e=this.$thumbnails.last()));if(!e.hasClass("current"))return _gaq.push(["AllSites._trackEvent","Reader Action","View Inline Gallery Slide",this.options.title]),this.beforeSlideChange(),this.$thumbnails.removeClass("current"),e.addClass("current"),this.$image.attr("src",e.find("img").data("full-img-src")),this.$caption.html(e.find("img").data("caption")||"")},n.prototype.close=function(){return this.unsetBindings(),this.remove(),this.unbind()},n.prototype.render=function(){return _gaq.push(["AllSites._trackEvent","Reader Action","View Inline Gallery",this.options.title]),_gaq.push(["AllSites._trackEvent","Reader Action","View Inline Gallery Slide",this.options.title]),this.cacheDomElements(),this.$image.after('<a class="prev-image"></a>').after('<a class="next-image"></a>'),this.setBindings(),this},n}(Backbone.View)}.call(this),function(){var e,t,n=function(e,t){return function(){return e.apply(t,arguments)}},r={}.hasOwnProperty,i=function(e,t){function i(){this.constructor=e}for(var n in t)r.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};(e=AT.Globals).PopupGallery||(e.PopupGallery={}),(t=AT.Views).Galleries||(t.Galleries={}),AT.Views.Galleries.PopupGallery=function(e){function t(){return this.startGallery=n(this.startGallery,this),this.initializeSwiper=n(this.initializeSwiper,this),this.updateCurrentThumbnail=n(this.updateCurrentThumbnail,this),this.loadVisibleThumbnails=n(this.loadVisibleThumbnails,this),this.handleToggleThumbnailGrid=n(this.handleToggleThumbnailGrid,this),this.handleToggleCaptions=n(this.handleToggleCaptions,this),this.handleSlideChangeClick=n(this.handleSlideChangeClick,this),this.handleThumbnailScroll=n(this.handleThumbnailScroll,this),this.setImageSize=n(this.setImageSize,this),this.updateGallerySize=n(this.updateGallerySize,this),this.setGallerySize=n(this.setGallerySize,this),this.handleWindowResize=n(this.handleWindowResize,this),this.handleKeydown=n(this.handleKeydown,this),this.handleClick=n(this.handleClick,this),t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.className="popup-gallery",t.prototype.template=JST["at-app/templates/galleries/popup_gallery"],t.prototype.gallery_size="undefined",t.prototype.image_size={},t.prototype.slide_change_count=0,t.prototype.image_sizes=[{w:568,h:568},{w:1e3,h:1e3},{w:1280,h:1280}],t.prototype.options={show_ad:!0,ad_slot:4,title:document.title.substring(0,document.title.indexOf("|")),standalone:!1,initial_slide:0,show_captions:!0},t.prototype.events={click:"handleClick","click .close":"close","click .fullscreen":"toggleFullscreen","click .toggle-captions":"handleToggleCaptions","click .scroll-thumbnails":"handleThumbnailScroll","click [data-go-to-slide]":"handleSlideChangeClick","click .toggle-thumbnail-grid":"handleToggleThumbnailGrid"},t.prototype.initialize=function(e){e||(e={});if(!e.id)throw new Error("PopupGallery View: No gallery id has been specified.");if(!window.ATGalleries||!window.ATGalleries[e.id])throw new Error("PopupGallery View: This page has no gallery with id "+e.id+".");return this.gallery=new AT.Models.Gallery(window.ATGalleries[e.id]),this.options.show_chip_it_button=this.options.show_ad&&!this.options.standalone&&new Date>new Date("07/01/2013"),this.setBindings()},t.prototype.cacheDomElements=function(){return this.$stage=this.$el.find(".popup-gallery-stage"),this.$scrollable_thumbnails=this.$el.find(".popup-gallery-thumbnail-navigation .popup-gallery-thumbnail"),this.$thumbs_next=this.$el.find(".scroll-thumbnails.next"),this.$thumbs_prev=this.$el.find(".scroll-thumbnails.prev"),this.$grid_thumbnails=this.$el.find(".popup-gallery-thumbnail-grid a"),this.$scrollable_info=this.$el.find(".popup-gallery-scrollable-info"),this.$caption=this.$el.find(".popup-gallery-caption"),this.$floating_caption=this.$el.find(".popup-gallery-floating-caption"),this.$advertisement=this.$el.find(".popup-gallery-advertisement"),this.$thumbnail_grid=this.$el.find(".popup-gallery-thumbnail-grid"),this.$slides=this.$el.find(".popup-gallery-slide")},t.prototype.setBindings=function(){return $(document).on("keydown.PopupGallery",this.handleKeydown),$(window).on("resize.PopupGallery",this.handleWindowResize)},t.prototype.unsetBindings=function(){return $(document).off("keydown.PopupGallery"),$(window).off("resize.PopupGallery")},t.prototype.handleClick=function(e){if($(e.target).hasClass("popup-gallery"))return this.close()},t.prototype.handleKeydown=function(e){e.which===AT.Keycodes.ESC&&this.close(),e.which===AT.Keycodes.LEFT_ARROW&&this.swiper.swipePrev();if(e.which===AT.Keycodes.RIGHT_ARROW)return this.swiper.swipeNext()},t.prototype.handleWindowResize=function(e){return this.updateGallerySize(),this.setImageSize(),this.resizeCurrentSlides(),this.setScrollableInfoHeight(),this.swiper.resizeFix()},t.prototype.setGallerySize=function(){var e;e=this.gallery_size,document.documentElement.clientWidth>770?this.gallery_size="large":this.gallery_size="small";if(e!==this.gallery_size)return this.$el.removeClass(e).addClass(this.gallery_size)},t.prototype.updateGallerySize=function(){var e,t=this;e=this.gallery_size,this.setGallerySize();if(e!==this.gallery_size&&this.gallery_size==="large")return this.initializeAd(),setTimeout(function(){return t.thumbnail_swiper.resizeFix(),t.handleSlideChange()},100)},t.prototype.setImageSize=function(){var e,t,n,r,i;e=this.image_size,i=this.image_sizes;for(n=0,r=i.length;n<r;n++){t=i[n],this.image_size=t;if(this.$stage.width()<=t.w&&this.$stage.height()<=t.h)break}if(e!==this.image_size&&e.w&&e.h)return this.resetSlides()},t.prototype.handleThumbnailScroll=function(e){return $(e.currentTarget).hasClass("prev")?this.thumbnail_swiper.swipePrev():this.thumbnail_swiper.swipeNext(),!1},t.prototype.handleSlideChangeClick=function(e){var t;return t=$(e.currentTarget).data("go-to-slide"),t==="NEXT"?this.swiper.swipeNext():t==="PREV"?this.swiper.swipePrev():this.swiper.swipeTo(t,0),!1},t.prototype.handleToggleCaptions=function(e){return this.options.show_captions=!this.options.show_captions,this.setCaptionVisibility(),!1},t.prototype.handleToggleThumbnailGrid=function(e){return this.$thumbnail_grid.hasClass("open")?this.hideThumbnailGrid():this.showThumbnailGrid(),!1},t.prototype.handleSlideChange=function(){var e;return e=this.swiper.$currentSlide().data("index"),this.loadCurrentSlides(),this
.setCaption(this.gallery.get("images")[e].caption),this.thumbnail_swiper.swipeTo(Math.max(0,this.swiper.activeIndex-2)),AT.Globals.router.navigate("gallery/"+this.options.id+"/"+e,{replace:!0}),this.updateSocialButtons(window.location,Handlebars.helpers.pixtruderImgUrl({hash:{id:this.gallery.get("images")[e].pixtruder_id}}),this.options.title)},t.prototype.loadCurrentSlides=function(){var e;return e=this.swiper.$currentSlide(),this.loadSlide(e),e.next().length>0&&this.loadSlide(e.next()),e.prev().length>0&&this.loadSlide(e.prev()),this.resizeCurrentSlides()},t.prototype.loadSlide=function(e){var t;if(!e.data("lazy-image"))return t=new AT.Views.LazyImage({model:new AT.Models.PixtruderImage(this.gallery.get("images")[e.data("index")].pixtruder_image),s:"fit",w:this.image_size.w,h:this.image_size.h}),t.render().$el.appendTo(e.find(".lazy-image-slide-wrapper")),t.load(),e.data("lazy-image",t)},t.prototype.loadVisibleThumbnails=function(){var e=this;return $.each([0,1,2,3,4,5],function(t){var n;n=e.$scrollable_thumbnails.eq(e.thumbnail_swiper.activeIndex+t);if(n.data("lazy-image"))return n.data("lazy-image").load()})},t.prototype.initializeLazyImage=function(e,t){var n;if(!e.data("lazy-image"))return t||(t={}),t.model=new AT.Models.PixtruderImage(this.gallery.get("images")[e.data("index")].pixtruder_image),n=new AT.Views.LazyImage(t),n.render().$el.appendTo(e),e.data("lazy-image",n)},t.prototype.resizeCurrentSlides=function(){var e;e=this.swiper.$currentSlide(),this.resizeSlide(e),e.next().length>0&&this.resizeSlide(e.next());if(e.prev().length>0)return this.resizeSlide(e.prev())},t.prototype.resizeSlide=function(e){return e.data("lazy-image").fit(this.$stage.width(),this.$stage.height())},t.prototype.resetSlides=function(){return this.$slides.each(function(){if($(this).data("lazy-image"))return $(this).data("lazy-image").remove(),$(this).data("lazy-image",null)}),this.loadCurrentSlides()},t.prototype.updateCurrentThumbnail=function(){return this.$scrollable_thumbnails.removeClass("current"),this.$scrollable_thumbnails.filter("[data-go-to-slide='"+this.swiper.activeIndex+"']").addClass("current"),this.loadVisibleThumbnails(),this.thumbnail_swiper.activeIndex===0?this.$thumbs_prev.addClass("hidden"):this.$thumbs_prev.removeClass("hidden"),this.$scrollable_thumbnails.length-this.thumbnail_swiper.activeIndex<=5?this.$thumbs_next.addClass("hidden"):this.$thumbs_next.removeClass("hidden")},t.prototype.incrementSlideChangeCount=function(){this.slide_change_count+=1;if(this.options.show_chip_it_button)return this.refreshAd();if(this.slide_change_count%3===0)return this.refreshAd()},t.prototype.updateSocialButtons=function(e,t,n){return this.$el.find(".popup-gallery-social-buttons").each(function(){return $(this).find(".pinterest").html("").append(JST["at-app/templates/social/pin_it_button"]({url:e,image_url:t,description:n}))}),$.ajax({url:"http://assets.pinterest.com/js/pinit.js",dataType:"script",cache:!0})},t.prototype.showThumbnailGrid=function(){return this.$el.find(".toggle-thumbnail-grid").addClass("on"),this.$grid_thumbnails.each(function(){return $(this).data("lazy-image").load()}),this.$thumbnail_grid.addClass("open").stop().animate({right:"0%"},400,"easeOutQuint")},t.prototype.hideThumbnailGrid=function(){if(this.$thumbnail_grid.hasClass("open"))return this.$el.find(".toggle-thumbnail-grid").removeClass("on"),this.$thumbnail_grid.removeClass("open").stop().animate({right:"-100%"},400,"easeOutQuint")},t.prototype.close=function(){return this.options.standalone?document.referrer&&window.location.href.indexOf(document.referrer)===0?window.history.back():window.location=window.location.pathname.replace(/\/galleries\/.*/,""):(this.unsetBindings(),AT.Globals.router.navigate("_",{replace:!0}),this.remove(),this.unbind()),!1},t.prototype.toggleFullscreen=function(){return this.$el.hasClass("fullscreen")?(AT.Util.exitFullScreen(),this.$el.removeClass("fullscreen")):(AT.Util.enterFullScreen(this.$el.find(".popup-gallery-container")[0]),this.$el.addClass("fullscreen")),setTimeout(this.swiper.resizeFix,200),!1},t.prototype.setCaption=function(e){return this.$el.toggleClass("slide-has-caption",!_.isEmpty(e)),this.$caption.html(e),this.setScrollableInfoHeight(),this.$floating_caption.html(e)},t.prototype.setCaptionVisibility=function(){return this.$el.toggleClass("show-captions",this.options.show_captions),this.$el.find(".toggle-captions").toggleClass("on",this.options.show_captions)},t.prototype.setScrollableInfoHeight=function(){return this.$scrollable_info.height($(".popup-gallery-info").height()-(this.$scrollable_info.offset().top-$(".popup-gallery-info").offset().top)-12),this.$scrollable_info.find(".wrap").height()>this.$scrollable_info.outerHeight()?this.$scrollable_info.addClass("overflowed"):this.$scrollable_info.removeClass("overflowed")},t.prototype.setFeatureSupport=function(){return this.$el.toggleClass("no-touch",!this.swiper.support.touch),this.$el.toggleClass("no-fullscreen",!AT.Util.supportsFullScreen(this.$el.find(".popup-gallery-container")[0]))},t.prototype.initializeSwiper=function(){var e=this;return this.swiper=new Swiper(".popup-gallery-stage",{loop:!0,simulateTouch:!1,initialSlide:this.options.initial_slide,onSlideChangeStart:function(t){return _gaq.push(["AllSites._trackEvent","Reader Action","View Popup Gallery Slide",e.options.title]),e.handleSlideChange(),e.incrementSlideChangeCount(),e.hideThumbnailGrid()}}),this.swiper.support.touch||(this.swiper.params.speed=0),this.swiper.$currentSlide=function(){return $(this.currentSlide()).next()},this.thumbnail_swiper=new Swiper(".scrollable-thumbnails",{slidesPerSlide:5,slidesPerGroup:5,simulateTouch:!1,initialSlide:Math.max(0,this.options.initial_slide-2),onSlideChangeStart:this.updateCurrentThumbnail})},t.prototype.initializeAd=function(){var e=this;if(this.options.show_ad)return AT.Globals.PopupGallery.is_ad_initialized?this.refreshAd():(AT.Globals.PopupGallery.is_ad_initialized=!0,googletag.cmd.push(function(){return googletag.display("div-gpt-ad-1320766135777-"+e.options.ad_slot)}))},t.prototype.refreshAd=function(){if(this.options.show_ad&&this.$advertisement.is(":visible")&&googletag&&googletag.pubads)return googletag.pubads().refresh([AT.ad_slots[this.options.ad_slot]])},t.prototype.startGallery=function(){var e;return this.initializeSwiper(),this.setFeatureSupport(),this.cacheDomElements(),e=this,this.$scrollable_thumbnails.each(function(){return e.initializeLazyImage($(this),{s:"centercrop_",w:56,h:56})}),this.$grid_thumbnails.each(function(){return e.initializeLazyImage($(this),{s:"centercrop_",w:140,h:140})}),this.setCaptionVisibility(),this.setImageSize(),this.handleSlideChange(),this.initializeAd()},t.prototype.render=function(){return _gaq.push(["AllSites._trackEvent","Reader Action","View Popup Gallery",this.options.title]),_gaq.push(["AllSites._trackEvent","Reader Action","View Popup Gallery Slide",this.options.title]),this.options.standalone&&this.$el.addClass("standalone"),this.$el.html(this.template({gallery:this.gallery.toJSON(),options:this.options,post_data:AT.CurrentPost})),this.setGallerySize(),setTimeout(this.startGallery,100),this},t}(Backbone.View)}.call(this),function(){var e,t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};(e=AT.Views).Galleries||(e.Galleries={}),AT.Views.Galleries.PopupGalleryLink=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return n(t,e),t.prototype.className="popup-gallery-link",t.prototype.template=JST["at-app/templates/galleries/popup_gallery_link"],t.prototype.initialize=function(e){return e.id||alert("NO GALLERY ID SPECIFIED"),(!window.ATGalleries||!window.ATGalleries[e.id])&&alert("NO GALLERY WITH ID "+e.id),this.gallery=new AT.Models.Gallery(window.ATGalleries[e.id])},t.prototype.render=function(){return this.$el.html(this.template({gallery:this.gallery.toJSON()})),this},t}(Backbone.View)}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};AT.Views.LazyImage=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.tagName="span",n.prototype.className="lazy-image",n.prototype.options={spinner:{lines:9,rotate:30,width:6,length:0,trail:50,radius:12,color:"#fff",speed:2,zIndex:1}},n.prototype.initialize=function(){if(_.isUndefined(this.model))throw new Error("AT.Views.LazyImage.initialize(): Missing image model");if(this.model instanceof AT.Models.PixtruderImage)return this.$pad=$('<span class="pad"></span>'),this.$el.append(this.$pad),this.spinner=new Spinner(this.options.spinner);throw new Error("AT.Views.LazyImage.initialize(): Model must be a PixtruderImage")},n.prototype.load=function(){var e,t=this;if(!this.$el.hasClass("loaded")&&!this.$el.hasClass("loading"))return this.$el.addClass("loading"),this.spinner.spin(this.$el[0]),e=$('<img class="lazy-load-preloader" />'),$("body").append(e),e.one("load.LazyImage",function(){return t.trigger("load"),t.spinner.stop(),t.$pad.hide(),t.$el.append(e.removeClass("lazy-load-preloader").hide()).addClass("loaded").removeClass("loading"),e.fadeIn().css("display","block")}).attr("src",Handlebars.helpers.pixtruderImgUrl({hash:{id:this.model.id,s:this.options.s,w:this.options.w,h:this.options.h,hide_extension:this.options.hide_extension}}))},n.prototype.fit=function(e,t){var n;n=this.model.get_image_dimensions({s:this.options.s,w:this.options.w,h:this.options.h}),n.width/e>n.height/t?this.$el.css("width",Math.min(e,n.width)):this.$el.css("width",Math.min(t/n.height*n.width,n.width));if(!this.$el.hasClass("loaded"))return this.spinner.spin(this.$el[0])},n.prototype.set_dimensions=function(){var e;return e=this.model.get_image_dimensions({s:this.options.s,w:this.options.w,h:this.options.h}),this.$el.css("width",e.width),this.$pad.css("paddingTop",""+100*e.height/e.width+"%")},n.prototype.render=function(){return this.set_dimensions(),this},n}(Backbone.View)}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};AT.Views.PrintRecipeButton=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=JST["at-app/templates/print_recipe_button"],n.prototype.print_friendly_template=JST["at-app/templates/print_friendly_recipe"],n.prototype.events={"click button":"openPrintableRecipe"},n.prototype.initialize=function(e){return this.show_jump_link=e.show_jump_link},n.prototype.openPrintableRecipe=function(){var e,t,n;return e={"class":$("html").attr("class"),stylesheet:$('link[media="print"]').attr("href"),title:$("h1:eq(0)").html(),content:$("#recipe").html(),author_info:$(".author-info").html()},n=window.open("","RecipeWindow","width=700,height=600,scrollbars=1"),n.document.open(),n.document.write(this.print_friendly_template(e)),n.document.close(),t=$("title")[0].text||"N/A",_gaq.push(["AllSites._trackEvent","Reader Action","Print Recipe",t]),!1},n.prototype.render=function(){return this.$el.html(this.template({show_jump_link:this.show_jump_link})),this},n}(Backbone.View)}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};AT.Router=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.routes={"gallery/:id":"showPopupGallery","gallery/:id/:slide_idx":"showPopupGallery"},n.prototype.showPopupGallery=function(e,t){var n;if(this.redirectToStandalonePopupGallery(e,t,!0))return!1;if(this.popup_gallery){if(this.popup_gallery.options.standalone)return window.history.back(),!1;this.popup_gallery.close()}return n={id:e,initial_slide:t},AT.CurrentPost&&(n.show_ad=!AT.CurrentPost.is_sponsored,n.title=AT.CurrentPost.title),AT.CurrentSite.blog_id===6&&(n.show_ad=!1),$(".standalone-popup-gallery-prompt").remove().length>0&&(n.standalone=!0),this.popup_gallery=(new AT.Views.Galleries.PopupGallery(n)).render(),$("body").append(this.popup_gallery.$el)},n.prototype.redirectToStandalonePopupGallery=function(e,t,n){var r;if(screen.width<1120&&$(".post-content").length>0)return t||(t=0),r=""+window.location.pathname+"/galleries/"+e+"#gallery/"+e+"/"+t,n&&this.navigate("_"),DeferredEvents.afterWindowLoad(function(){return window.location.href=r}),!0},n}(Backbone.Router)}.call(this);if(window.ATGalleries){$sticky=$(".sticky-sidebar"),$sticky.length==0&&($sticky=$('<div class="sticky-sidebar"></div>').appendTo("#aside"));for(var i in ATGalleries)$sticky.append((new AT.Views.Galleries.PopupGalleryLink({id:i,className:"popup-gallery-sidebar-callout"})).render().$el)}$(".postpage .inline-gallery").each(function(){(new AT.Views.Galleries.InlineGallery({el:"#"+$(this).attr("id")})).render()}),$("#recipe").each(function(){$(this).after((new AT.Views.PrintRecipeButton({})).render().$el),$(".hgroup:eq(0)").after((new AT.Views.PrintRecipeButton({show_jump_link:!0})).render().$el)});var $popup_gallery_links=$('a[href^="#gallery/"]');$popup_gallery_links.add($('a[href*="'+window.location.pathname+'#gallery/"]')),AT.CurrentPost&&($popup_gallery_links=$popup_gallery_links.add($('a[href*="-'+AT.CurrentPost.id+'#gallery/"]'))),$popup_gallery_links.click(function(){var e=$(this).attr("href").replace(/.*#/,"").split("/");return e[2]=e[2]||0,AT.Globals.router.redirectToStandalonePopupGallery(e[1],e[2])?!1:(AT.Globals.router.navigate("gallery/"+e[1]+"/"+e[2],{replace:!0,trigger:!0}),!1)}),AT.Globals.router=new AT.Router,Backbone.history.start(),$("html").removeClass("no-js").addClass("js"),$(".post-pagination").each(function(){var e=$(this).height();$(this).find("a, .no-post").css("height",e)}),$(".mini-email-signup").submit(function(){return showEmailSignupModal($(this).find("input[name=email]").val()),!1}),window.location.hash.substring(0,13)=="#email-signup"&&showEmailSignupModal(window.location.hash.substring(14)),$(document).on("keyup",function(e){e.keyCode==AT.Keycodes.ESC&&hideOverlays()}),$(".overlay-screen").live("click",function(){hideOverlays()}),$(".category-section-nav a").click(function(){return $(".category-section-nav .selected").removeClass("selected"),$(this).addClass("selected"),$(".category-list").css("display","none"),$("#"+$(this).attr("id")+"-section").css("display","block"),!1}),$(".article iframe[src*='youtube.com']").each(function(){var e=$(this).attr("src"),t="wmode=transparent";e.indexOf("?")!=-1?$(this).attr("src",e+"&"+t):$(this).attr("src",e+"?"+t)}),$(".has-flyout span").click(function(){}),$(".sticky-sidebar:not(:empty)").each(function(){$(this).stickybuns({bottom:function(){return $(".post-content").offset().top+$(".post-content").outerHeight()-10}})}),$("img#jcp-widget-tracker").attr("src","http://ad.doubleclick.net/ad/N1558.132752.1198916334521/B7697361.17;sz=1x1;ord="+(new Date).getTime()+"?");